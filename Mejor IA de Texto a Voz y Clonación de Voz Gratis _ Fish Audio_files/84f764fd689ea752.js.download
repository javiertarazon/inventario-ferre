(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,907477,e=>{"use strict";e.s(["getActiveUsers",()=>o,"getApiUsageRank",()=>h,"getOldUserActivity",()=>u,"getPlaygroundChart",()=>c,"getPlaygroundErrorRate",()=>s,"getPlaygroundUserAvgChart",()=>i,"getPlaygroundUserChart",()=>n,"getRetention",()=>d,"getSampleText",()=>r,"getTTSUsage",()=>g,"getUserChart",()=>a,"getUserPremiumActivity",()=>l]);var t=e.i(100574);let r=t.fetcher.path("/sample_text").method("get").create(),a=t.fetcher.path("/user-chart").method("get").create(),c=t.fetcher.path("/playground-chart").method("get").create(),n=t.fetcher.path("/playground-user-chart").method("get").create(),i=t.fetcher.path("/playground-user-avg-chart").method("get").create(),s=t.fetcher.path("/playground-error-rate").method("get").create();t.fetcher.path("/api-usage").method("get").create();let o=t.fetcher.path("/user-activity").method("get").create(),u=t.fetcher.path("/user-old-activity").method("get").create(),l=t.fetcher.path("/user-premium-activity").method("get").create(),d=t.fetcher.path("/user-retention").method("get").create(),g=t.fetcher.path("/tts-usage").method("get").create(),h=t.fetcher.path("/api-usage-rank").method("get").create()},621847,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},935931,e=>{"use strict";e.s(["default",()=>g],935931);var t=e.i(843476),r=e.i(437902),a=e.i(271645),c=e.i(429382),n=e.i(4272),i=e.i(585264),s=e.i(647163),o=e.i(163850),u=e.i(907477),l=e.i(621847),l=l,d=e.i(387951);let g=e=>{let{onRecordComplete:g}=e,h=(0,i.useTranslations)("train-new-model"),[f,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),b=(0,a.useRef)(null),j=(0,a.useRef)(null),w=(0,a.useRef)([]),[S,N]=(0,a.useState)(0),k=(0,a.useRef)(null),R=(0,i.useLocale)(),[U,T]=(0,a.useState)(),[A,C]=(0,o.useAsyncFn)(async()=>{T((await (0,u.getSampleText)({language:"zh-CN"===R?"cn":"en"})).data)},[R]);function P(e){var t,r;w.current.push(e.data),(null==(t=j.current)?void 0:t.state)==="inactive"&&(g(new File([new Blob(w.current,{type:"audio/x-mpeg-3"})],"recording.mp3")),null==(r=b.current)||r.getTracks().forEach(e=>e.stop()),j.current=null,b.current=null)}async function E(){try{y(!0);let e=!1;for(let t of(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind))if("default"===t.deviceId){e=!0;break}b.current=await navigator.mediaDevices.getUserMedia({audio:!e||{deviceId:{exact:"default"}}}),j.current=new c.MediaRecorder(b.current),w.current=[],j.current.ondataavailable=P,j.current.start(),j.current.onstart=()=>{y(!1),x(!0);let e=performance.now();k.current=setInterval(()=>{N(Math.floor((performance.now()-e)/1e3))},1e3)}}catch(e){console.error("Error getting recording permission",e),y(!1)}}async function I(){var e;null==(e=j.current)||e.stop(),k.current&&clearInterval(k.current),N(0),x(!1)}return((0,a.useEffect)(()=>((0,c.isSupported)().then(e=>m(e)),C(),()=>{k.current&&clearInterval(k.current)}),[]),(0,a.useEffect)(()=>{!f||p||v||E()},[f]),f)?(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"jsx-562a96c8d315b414 flex items-center gap-3",children:[(0,t.jsx)("div",{style:p?{animation:"recording-pulse 1s ease-in-out infinite"}:void 0,className:"jsx-562a96c8d315b414 "+((0,s.cn)("h-4 w-4 rounded-full transition-all",p?"animate-recording-pulse":"bg-muted")||"")}),(0,t.jsx)(r.default,{id:"562a96c8d315b414",children:"@keyframes recording-pulse{0%,to{background-color:#ef4444;box-shadow:0 0 8px #ef4444}50%{background-color:#f87171;box-shadow:0 0 16px #f87171}}"}),(0,t.jsxs)("span",{className:"jsx-562a96c8d315b414 text-2xl font-semibold tabular-nums",children:[Math.floor(S/60).toString().padStart(2,"0"),":",(S%60).toString().padStart(2,"0")]})]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:v?h("audio-file.connecting"):p?h("audio-file.recording")||"Recording...":h("audio-file.start")}),U&&p&&(0,t.jsx)("div",{className:"mx-auto max-w-md rounded-2xl border bg-background/80 p-4 backdrop-blur",children:(0,t.jsx)("div",{className:"text-center text-sm italic text-muted-foreground",children:U})}),p&&(0,t.jsxs)(n.Button,{variant:"destructive",size:"lg",onClick:I,className:"gap-2",children:[(0,t.jsx)(l.default,{className:"h-4 w-4 fill-current"}),h("audio-file.stop")]}),v&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(d.Mic,{className:"h-4 w-4 animate-pulse"}),h("audio-file.connecting")]})]}):(0,t.jsx)("div",{className:"text-center text-muted-foreground",children:h("audio-file.record-not-supported")})}},622050,e=>{e.n(e.i(935931))}]);