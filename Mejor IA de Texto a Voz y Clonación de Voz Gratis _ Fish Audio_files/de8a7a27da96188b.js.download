(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,563921,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},972520,e=>{"use strict";e.s(["ArrowRight",()=>t.default]);var t=e.i(563921)},57353,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},21218,e=>{"use strict";e.s(["Activity",()=>t.default]);var t=e.i(57353)},880145,e=>{"use strict";e.s(["DashboardAudioControlProvider",()=>D,"DashboardVoiceCardV2",()=>A,"useDashboardAudioControl",()=>_]);var t=e.i(843476),r=e.i(39839),s=e.i(558249),a=e.i(972520),l=e.i(87309),n=e.i(531278),i=e.i(495242),o=e.i(431343),d=e.i(662031),c=e.i(21218),u=e.i(200997),m=e.i(647163),h=e.i(602596),x=e.i(192049),p=e.i(941855),f=e.i(790830),g=e.i(271645),v=e.i(725626),j=e.i(173601),b=e.i(245046),w=e.i(999445),y=e.i(522016),N=e.i(585264),k=e.i(64585);let C=(0,g.createContext)(null);function D(e){let{children:r}=e,s=(0,h.useAudioUniqueControl)();return(0,t.jsx)(C.Provider,{value:s,children:r})}function _(){let e=(0,g.useContext)(C);if(!e)throw Error("useAudioControl must be used within AudioControlProvider");return e}function P(e){let{data:r,isDesktop:s,className:l}=e;return(0,t.jsxs)("div",{className:(0,m.cn)("flex items-center gap-4 border-b border-std-border-base p-4",l),children:[(0,t.jsx)(y.default,{href:"/app/m/".concat(r._id),children:(0,t.jsx)(u.Avatar,{className:(0,m.cn)("h-14 w-14 rounded-lg"),children:(0,t.jsx)(u.AvatarImage,{src:(0,m.fetchImage)(r.cover_image,s?128:64),alt:r.title})})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-2",children:[(0,t.jsxs)(y.default,{href:"/app/m/".concat(r._id),className:"hover:bg-std-bg-secondary/50 group flex items-center gap-2 rounded-lg px-1 transition-all duration-300",children:[(0,t.jsx)("h3",{className:"min-w-0 flex-1 truncate font-bold text-std-text-heading transition-colors duration-300 group-hover:text-std-text-primary",children:r.title}),(0,t.jsx)("button",{className:"flex-shrink-0 text-std-text-secondary transition-all duration-300 group-hover:translate-x-1 group-hover:text-std-text-primary",children:(0,t.jsx)(a.ArrowRight,{size:20})})]}),(0,t.jsxs)("div",{className:"voice-card-v2__meta flex items-center gap-2",children:[(0,t.jsx)(x.TimeLineUser,{className:"text-std-text-placeholder",linkClassName:"font-semibold",avatar:r.author.avatar,name:r.author.nickname,userId:r.author._id}),(0,t.jsx)("div",{className:"h-1 w-1 rounded-full bg-std-text-placeholder"}),(0,t.jsx)(x.TimeLineDate,{spanClassName:"text-std-text-placeholder",clockClassName:"text-std-text-placeholder h-4 w-4",time:r.created_at})]})]})]})}function M(e){var r,s,a,d,u,h,x,v,j,b,w,y;let{data:k,className:C}=e,D=(0,N.useTranslations)("discovery"),[P,M]=(0,g.useState)(!1),{isCN:T}=(0,p.useEnvironment)(),S=(0,f.useAudioRef)(),{currentPlaying:A,isPlay:R,handlePlayAudio:I}=_(),F=(0,m.formatAudioUrl)((null==(s=k.samples)||null==(r=s[0])?void 0:r.audio)||"",T),L=(null==(d=k.samples)||null==(a=d[0])?void 0:a.text)||(null==(h=k.samples)||null==(u=h[0])?void 0:u.audio);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,m.cn)("flex h-[4.0625rem] gap-2 border-b border-std-border-base p-4",C),children:[(0,t.jsx)("div",{className:"flex flex-1 items-center gap-2 pr-2",children:L?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{var e,t;if(S.current&&(null==(t=k.samples)||null==(e=t[0])?void 0:e.audio))try{S.current.paused?I(S.current,!1):I(S.current,!0)}catch(e){console.error(e)}},className:"transition-all duration-200 hover:scale-110 hover:text-std-text-primary",children:(null==(y=k.samples)||null==(w=y[0])?void 0:w.audio)?P?(0,t.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):A===S.current&&R?(0,t.jsx)(i.Pause,{size:18,className:"text-std-text-placeholder"}):(0,t.jsx)(o.Play,{size:18,className:"text-std-text-placeholder"}):null}),(0,t.jsx)("p",{className:"line-clamp-2 text-xs text-std-text-placeholder",children:null==(v=k.samples)||null==(x=v[0])?void 0:x.text})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-std-text-placeholder",children:[(0,t.jsx)(l.AudioLines,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-std-text-placeholder",children:D("no_audio_sample")})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm font-semibold text-std-text-placeholder",children:[(0,t.jsx)(c.Activity,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:(0,m.formatThousandthNumber)(k.task_count||0,1)})]})]}),(null==(b=k.samples)||null==(j=b[0])?void 0:j.audio)&&(0,t.jsx)("audio",{className:"hidden",src:F,controls:!1,onEnded:()=>I(S.current,!0),onError:()=>M(!1),onCanPlayThrough:()=>M(!1),ref:S})]})}let T=function(e){let{data:r,className:s,...a}=e,{like:l,mark:n,count_cache:i,handleLike:o,handleMark:c,share:u}=(0,j.useVoiceCardActions)(r),{isCN:h}=(0,p.useEnvironment)();return(0,t.jsxs)("div",{className:(0,m.cn)("flex gap-3 text-sm",s),...a,children:[!h&&(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2 text-xs md:text-sm",onClick:u,children:[(0,t.jsx)(d.Share2,{className:"h-4 w-4 text-gray-1 md:h-5 md:w-5"}),(0,t.jsx)("span",{children:(0,m.formatThousandthNumber)(i.shared,1)})]}),(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:o,children:[(0,t.jsx)(b.Heart,{className:(0,m.cn)("h-4 w-4 md:h-5 md:w-5",l?"text-red":"text-gray-1"),fillIcon:l}),(0,t.jsx)("span",{children:(0,m.formatThousandthNumber)(i.like,1)})]}),(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:c,children:[(0,t.jsx)(w.Bookmark,{className:(0,m.cn)("h-4 w-4 md:h-5 md:w-5",n?"":"text-gray-1"),fillIcon:n}),(0,t.jsx)("span",{children:(0,m.formatThousandthNumber)(i.mark,1)})]})]})};function S(e){var r,a,n,i,o;let{data:d,className:c}=e,u=(0,N.useTranslations)("discovery"),{user:h}=(0,k.useUser)();return(0,t.jsxs)("div",{className:(0,m.cn)("flex w-full gap-2 p-4",c),children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,t.jsx)("div",{className:"w-12",children:(0,t.jsx)(v.Overflow,{itemClassName:"rounded-lg",maxDisplayCount:1,data:null!=(n=null==(a=d.languages)||null==(r=a.map)?void 0:r.call(a,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()))?n:[]})}),(0,t.jsx)(T,{data:d})]}),(0,t.jsxs)(y.default,{className:"hover:bg-std-bg-secondary/50 flex items-center gap-1 rounded-lg px-2 py-1 text-sm font-semibold text-std-text-placeholder transition-all duration-200 hover:text-std-text-primary",href:(0,m.getInstantSpeechUrl)(d._id,void 0,null==(o=d.samples)||null==(i=o[0])?void 0:i.text).replace("/text-to-speech/","/app/text-to-speech/"),onClick:e=>{(0,s.track)("discover-use-voice-click",{model_id:d._id},h)},children:[(0,t.jsx)(l.AudioLines,{className:"h-4 w-4 md:h-5 md:w-5"}),(0,t.jsx)("span",{children:u("use")})]})]})}function A(e){let{data:s}=e,a=(0,r.useMediaQuery)("(min-width: 768px)");return(0,t.jsxs)("div",{className:"flex flex-col rounded-xl bg-std-bg-card",children:[(0,t.jsx)(P,{data:s,isDesktop:a}),(0,t.jsx)(M,{data:s}),(0,t.jsx)(S,{data:s})]})}},247970,937493,e=>{"use strict";e.s(["MyVoicesNavigationBar",()=>N],247970);var t=e.i(843476),r=e.i(618566),s=e.i(271645),a=e.i(4272),l=e.i(664659),n=e.i(107233),i=e.i(531278),o=e.i(160889),d=e.i(681846),c=e.i(64585),u=e.i(672345);e.s(["CreateCollectionDialog",()=>y],937493);var m=e.i(585264),h=e.i(969520),x=e.i(653860),p=e.i(158079),f=e.i(846696),g=e.i(653145),v=e.i(994814),j=e.i(602946),b=e.i(50270);let w=b.z.object({title:b.z.string().min(1,"Title is required").max(30,"Title must be less than 30 characters"),description:b.z.string().max(100,"Description must be less than 100 characters").optional()});function y(e){let{open:r,onOpenChange:l,onSuccess:n}=e,i=(0,m.useTranslations)("collections"),[o,d]=(0,s.useState)(!1),c=(0,g.useForm)({resolver:(0,v.zodResolver)(w),defaultValues:{title:"",description:""}}),b=async e=>{try{var t;d(!0),await (0,u.createVoiceCollection)({title:e.title,description:null!=(t=e.description)?t:""}),f.toast.success(i("notification.create_success")),n(),l(!1),c.reset()}catch(e){console.error(e)}finally{d(!1)}};return(0,t.jsx)(h.Dialog,{open:r,onOpenChange:l,children:(0,t.jsxs)(h.DialogContent,{children:[(0,t.jsx)(h.DialogHeader,{children:(0,t.jsx)(h.DialogTitle,{children:i("create_title")})}),(0,t.jsx)(j.Form,{...c,children:(0,t.jsxs)("form",{onSubmit:c.handleSubmit(b),className:"space-y-4",children:[(0,t.jsx)(j.FormField,{control:c.control,name:"title",render:e=>{let{field:r}=e;return(0,t.jsxs)(j.FormItem,{children:[(0,t.jsx)(j.FormLabel,{children:i("title")}),(0,t.jsx)(j.FormControl,{children:(0,t.jsx)(x.Input,{placeholder:i("title_placeholder"),...r})}),(0,t.jsx)(j.FormMessage,{})]})}}),(0,t.jsx)(j.FormField,{control:c.control,name:"description",render:e=>{let{field:r}=e;return(0,t.jsxs)(j.FormItem,{children:[(0,t.jsx)(j.FormLabel,{children:i("description")}),(0,t.jsx)(j.FormControl,{children:(0,t.jsx)(p.Textarea,{placeholder:i("description_placeholder"),className:"min-h-[100px]",...r})}),(0,t.jsx)(j.FormMessage,{})]})}}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>l(!1),children:i("cancel")}),(0,t.jsx)(a.Button,{type:"submit",disabled:o,children:o?i("creating"):i("create")})]})]})})]})})}function N(){let e=(0,r.usePathname)(),h=(0,m.useTranslations)("collections"),x=(0,m.useTranslations)("nav"),p=(0,m.useTranslations)("text-to-speech"),f=(0,m.useTranslations)("profile"),{user:g}=(0,c.useUser)(),[v,j]=(0,s.useState)([]),[b,w]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[C,D]=(0,s.useState)(!1),_=t=>"/app/my-voices"===t?"/app/my-voices"===e||"/app/my-voices/"===e:e.startsWith(t),P=(0,s.useCallback)(async()=>{if(null==g?void 0:g._id){w(!0);try{let e=(await (0,u.listVoiceCollection)({})).data.filter(e=>e.user_id===g._id);j(e)}catch(e){console.error("Failed to fetch collections:",e)}finally{w(!1)}}},[null==g?void 0:g._id]);return(0,s.useEffect)(()=>{C&&(null==g?void 0:g._id)&&P()},[C,null==g?void 0:g._id,P]),(0,t.jsxs)("div",{className:"mb-6 w-full overflow-x-auto",children:[(0,t.jsxs)("div",{className:"flex min-w-max items-center gap-2",children:[(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",asChild:!0,className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(_("/app/my-voices")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:(0,t.jsx)(o.Link,{href:"/app/my-voices",children:x("my-voice")})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",asChild:!0,className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(_("/app/discovery")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:(0,t.jsx)(o.Link,{href:"/app/discovery",children:x("discovery")})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",asChild:!0,className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(_("/app/default-voices")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:(0,t.jsx)(o.Link,{href:"/app/default-voices",children:p("default_voices")})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",asChild:!0,className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(_("/app/bookmarks")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:(0,t.jsx)(o.Link,{href:"/app/bookmarks",children:f("bookmarks")})}),(0,t.jsxs)(d.DropdownMenu,{open:C,onOpenChange:D,children:[(0,t.jsx)(d.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(e.startsWith("/app/voice-collections")||e.startsWith("/app/collections/")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:[x("my-voice-collection"),(0,t.jsx)(l.ChevronDown,{className:"ml-1 h-3 w-3"})]})}),(0,t.jsxs)(d.DropdownMenuContent,{align:"end",className:"max-h-96 w-56 overflow-y-auto",children:[(0,t.jsx)(d.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(o.Link,{href:"/app/voice-collections",className:"w-full",children:h("all_collections")})}),b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.DropdownMenuSeparator,{}),(0,t.jsxs)(d.DropdownMenuItem,{disabled:!0,children:[(0,t.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),h("loading")]})]}):v.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.DropdownMenuSeparator,{}),v.slice(0,10).map(e=>(0,t.jsx)(d.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(o.Link,{href:"/app/collections/".concat(e._id),className:"w-full",children:(0,t.jsx)("span",{className:"truncate",children:e.title})})},e._id))]}):null,(0,t.jsx)(d.DropdownMenuSeparator,{}),(0,t.jsxs)(d.DropdownMenuItem,{className:"font-medium",onClick:e=>{e.preventDefault(),k(!0),D(!1)},children:[(0,t.jsx)(n.Plus,{className:"mr-2 h-4 w-4"}),h("create_collection")]})]})]})]}),(0,t.jsx)(y,{open:N,onOpenChange:k,onSuccess:()=>{P()}})]})}},360805,e=>{"use strict";e.s(["VoiceRow",()=>S]);var t=e.i(843476),r=e.i(271645),s=e.i(585264),a=e.i(160889),l=e.i(647163),n=e.i(64585),i=e.i(941855),o=e.i(790830),d=e.i(880145),c=e.i(639499),u=e.i(200997),m=e.i(4272),h=e.i(681846),x=e.i(462837),p=e.i(617628),f=e.i(419751),g=e.i(891370),v=e.i(523934),j=e.i(286536),b=e.i(531278),w=e.i(323585),y=e.i(495242),N=e.i(431343),k=e.i(662031),C=e.i(727612),D=e.i(94747),_=e.i(846696),P=e.i(80897),M=e.i(753070),T=e.i(600743);let S=r.forwardRef((e,S)=>{var A,R,I,F,L;let{className:E,data:U,onDeleted:z,showActions:H=!0,...B}=e,O=(0,s.useTranslations)("my-models"),V=(0,a.useRouter)(),{user:W}=(0,n.useUser)(),{isCN:Y}=(0,i.useEnvironment)(),[q,K]=(0,r.useState)(!1),Q=(0,o.useAudioRef)(),{currentPlaying:G,isPlay:J,handlePlayAudio:X}=(0,d.useDashboardAudioControl)(),Z=(null==(R=U.samples)||null==(A=R[0])?void 0:A.audio)||"",$=Z.startsWith("http")?(0,l.formatAudioUrl)(Z,Y):(0,l.getAudioUrl)(Z,Y),ee=!!(null==(F=U.samples)||null==(I=F[0])?void 0:I.audio),[et,er]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(!1),el=()=>{if(Q.current&&ee)try{Q.current.paused?X(Q.current,!1):X(Q.current,!0)}catch(e){console.error(e)}};return(0,t.jsxs)("div",{ref:S,className:(0,l.cn)("group grid grid-cols-[1fr_auto_auto] items-center gap-0 rounded-xl px-0 py-1 transition-colors active:bg-muted/50 md:grid-cols-[2fr_1fr_1fr_1fr_auto] md:gap-4 md:hover:bg-muted/50","trained"===U.state?"cursor-pointer":"",E),onClick:function(e){let t=e.target;e.currentTarget.contains(t)&&(t.closest('button, a, [role="button"]')||"trained"!==U.state||es||et||el())},...B,children:[(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative h-10 w-10 shrink-0",children:[(0,t.jsx)(u.Avatar,{className:"h-full w-full rounded-full",children:(0,t.jsx)(u.AvatarImage,{src:(0,l.fetchImage)(U.cover_image),alt:U.title,className:"object-cover"})}),ee&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),el()},className:(0,l.cn)("absolute inset-0 flex items-center justify-center rounded-full bg-black/20 transition-opacity dark:bg-white/10",G===Q.current&&J?"opacity-100":"opacity-0 md:group-hover:opacity-100"),children:(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-white/90 shadow-sm dark:bg-black/80",children:ee?q?(0,t.jsx)(b.Loader2,{className:"h-4 w-4 animate-spin text-gray-600 dark:text-gray-300"}):G===Q.current&&J?(0,t.jsx)(y.Pause,{size:16,className:"text-gray-700 dark:text-gray-200"}):(0,t.jsx)(N.Play,{size:16,className:"text-gray-700 dark:text-gray-200"}):null})})]}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-col overflow-hidden",children:[(0,t.jsx)("span",{className:"truncate font-medium",children:U.title}),(0,t.jsx)("span",{className:"truncate text-sm text-muted-foreground",children:U.description||" "})]})]}),(0,t.jsx)("div",{className:"hidden items-center gap-2 md:flex",children:U.languages&&U.languages.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.TwemojiFlag,{locale:U.languages[0],className:"shadow-sm"}),(0,t.jsx)("span",{className:"text-xs",children:P.languageNameMap[U.languages[0]]||U.languages[0]})]}):(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:O("not_specified")})}),(0,t.jsxs)("div",{className:"hidden items-center gap-2 text-muted-foreground md:flex",children:[(0,t.jsx)(v.Clock3,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs",children:(0,D.default)(U.created_at).format("MMM D, YYYY")})]}),(0,t.jsxs)("div",{className:"flex min-w-0 items-center justify-end md:justify-start",children:[(0,t.jsx)("div",{className:"md:hidden",children:(0,t.jsx)(m.Button,{size:"icon",variant:"ghost",className:"h-9 w-9 rounded-full hover:bg-primary/10 hover:text-primary",onClick:e=>{e.stopPropagation(),el()},children:G===Q.current&&J?(0,t.jsx)(y.Pause,{className:"h-4 w-4"}):(0,t.jsx)(N.Play,{className:"h-4 w-4"})})}),(0,t.jsx)("div",{className:"hidden w-full md:flex",children:!!(null==(L=U.samples)?void 0:L.length)&&(0,t.jsx)(g.DashboardTimeLineSamples,{className:"w-full max-w-[150px]",list:U.samples})})]}),(0,t.jsxs)("div",{className:"flex shrink-0 items-center justify-end gap-0",children:["trained"!==U.state&&(0,t.jsx)(p.StatusBadge,{status:U.state}),(0,t.jsx)(x.TooltipProvider,{children:(0,t.jsxs)(x.Tooltip,{children:[(0,t.jsx)(x.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)(m.Button,{variant:"ghost",className:"h-9 cursor-pointer gap-2 rounded-xl px-3 hover:bg-primary/10 hover:text-primary",onClick:e=>{e.stopPropagation(),function(){var e,t;try{sessionStorage.setItem("tts_draft_model_id",U._id),sessionStorage.removeItem("tts_draft_text")}catch(e){}let r=null==(t=U.samples)||null==(e=t[0])?void 0:e.text;if(r){let e=(0,c.getDashboardInstantSpeechUrl)(U._id,void 0,r);V.push(e)}else V.push("/app/text-to-speech/")}()},children:[(0,t.jsx)(M.LuFileAudio2,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:O("use_voice")})]})}),(0,t.jsx)(x.TooltipContent,{children:(0,t.jsx)("p",{children:O("use_voice")})})]})}),H&&(0,t.jsxs)(h.DropdownMenu,{open:es,onOpenChange:ea,children:[(0,t.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"icon",className:"h-9 w-5 rounded-full md:w-9",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(w.MoreVertical,{className:"h-5 w-5 text-muted-foreground"})})}),(0,t.jsxs)(h.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(h.DropdownMenuItem,{onClick:e=>{e.stopPropagation(),V.push((0,c.getDashboardModelUrl)(U._id))},className:"cursor-pointer",children:[(0,t.jsx)(j.Eye,{className:"mr-2 h-4 w-4"}),O("view")]}),(null==W?void 0:W._id)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(h.DropdownMenuItem,{onClick:e=>{e.stopPropagation();try{let e=(0,c.getDashboardInstantSpeechUrl)(U._id,void 0,""),t=window.location.origin,r="".concat(t).concat(e);navigator.clipboard.writeText(r),_.toast.success("Link copied")}catch(e){console.error("Failed to copy link",e),_.toast.error("Failed to copy link")}},className:"cursor-pointer",children:[(0,t.jsx)(k.Share2,{className:"mr-2 h-4 w-4"}),"Share Link"]}),(0,t.jsxs)(h.DropdownMenuItem,{onClick:e=>{e.stopPropagation(),er(!0)},className:"text-red-600 focus:text-red-600 cursor-pointer",children:[(0,t.jsx)(C.Trash2,{className:"mr-2 h-4 w-4"}),O("delete")]})]})]})]})]}),ee&&(0,t.jsx)("audio",{className:"hidden",src:$,controls:!1,onEnded:()=>X(Q.current,!0),onError:()=>K(!1),onCanPlayThrough:()=>K(!1),ref:Q}),(0,t.jsx)(f.DelModelDialog,{id:U._id,confirmDelete:et,setConfirmDelete:er,onDeleted:z})]})});S.displayName="VoiceRow"},62932,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("file-plus-corner",[["path",{d:"M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35",key:"17jvcc"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M14 19h6",key:"bvotb8"}],["path",{d:"M17 16v6",key:"18yu1i"}]])},370144,e=>{"use strict";e.s(["FilePlus2",()=>t.default]);var t=e.i(62932)},236579,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]])},653860,e=>{"use strict";e.s(["FileUpload",()=>c,"Input",()=>i,"InputV2",()=>o,"InputV2Slot",()=>d],653860);var t=e.i(843476),r=e.i(271645),s=e.i(647163),a=e.i(370144),l=e.i(236579),l=l,n=e.i(657688);let i=r.forwardRef((e,r)=>{let{className:a,type:l,...n}=e;return"textarea"===l?(0,t.jsx)("textarea",{className:(0,s.cn)("flex h-32 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...n}):(0,t.jsx)("input",{type:l,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...n})});i.displayName="Input";let o=r.forwardRef((e,a)=>{let{className:l,type:n,children:i,...o}=e,d=r.useRef(null);return r.useImperativeHandle(a,()=>d.current,[d]),(0,t.jsxs)("div",{className:(0,s.cn)("flex h-10 w-full items-center gap-2 overflow-hidden rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-within:outline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),children:[(0,t.jsx)("input",{type:n,className:"w-0 min-w-2 flex-1 bg-transparent outline-none",ref:d,...o}),i]})});o.displayName="InputV2";let d=r.forwardRef((e,r)=>{let{className:a,side:l,...n}=e;return(0,t.jsx)("div",{className:(0,s.cn)({"-order-1":"right"!==l},"h-6 w-6 text-center leading-6",a),ref:r,...n})});d.displayName="InputV2Slot",r.forwardRef((e,a)=>{let{className:i,file:o,img:d,alt:c,...u}=e,m=r.useRef(null);r.useImperativeHandle(a,()=>m.current);let h=r.useMemo(()=>{if("string"==typeof o)return o;if(o&&o instanceof Blob&&o.type&&o.type.includes("image")){let e=URL.createObjectURL(o);return e&&""+e}return d},[o,d]);return r.useEffect(()=>()=>{h&&"string"==typeof h&&h.startsWith("blob:")&&URL.revokeObjectURL(h)},[h]),(0,t.jsxs)("div",{className:(0,s.cn)("border-file-upload-icon flex h-24 w-24 items-center justify-center rounded-md border border-dashed border-opacity-50 dark:border-white",i),onClick:function(){var e;null==(e=m.current)||e.click()},children:[h?(0,t.jsx)(n.default,{loading:"lazy",src:h,layout:"fill",className:"!relative h-full w-full object-cover",alt:c||""}):(0,t.jsx)(l.default,{className:"text-gray-1"}),(0,t.jsx)("input",{className:"hidden",ref:m,type:"file",accept:"image/jpeg,image/png,image/gif",...u})]})}).displayName="PictureUpload";let c=r.forwardRef((e,l)=>{let{className:n,children:i,dropable:o=!1,onChange:d,...c}=e,u=r.useRef(null);return r.useImperativeHandle(l,()=>u.current),(0,t.jsxs)("div",{className:(0,s.cn)("flex items-center rounded-md border border-dashed border-file-upload-border border-opacity-50 p-4",n),onClick:function(){var e;null==(e=u.current)||e.click()},onDragOverCapture:o?function(e){e.preventDefault(),e.stopPropagation()}:void 0,onDropCapture:o?function(e){e.preventDefault(),e.stopPropagation();let t=e.dataTransfer.files;t.length>0&&(null==d||d(t))}:void 0,children:[(0,t.jsx)("div",{className:"dark:bg-file-upload-icon-bg flex h-11 w-11 items-center justify-center rounded-lg bg-timeline-pointground",children:(0,t.jsx)(a.FilePlus2,{className:"text-file-upload-icon"})}),i,(0,t.jsx)("input",{className:"hidden",ref:u,type:"file",...c,onChange:function(e){e.target.files&&(null==d||d(e.target.files))}})]})});c.displayName="FileUpload"},107233,603908,e=>{"use strict";e.s(["Plus",()=>t],107233),e.s(["default",()=>t],603908);let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},727612,612329,e=>{"use strict";e.s(["Trash2",()=>t],727612),e.s(["default",()=>t],612329);let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},360200,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},788699,e=>{"use strict";e.s(["Pencil",()=>t.default]);var t=e.i(360200)},639499,e=>{"use strict";e.s(["getDashboardInstantSpeechUrl",()=>t,"getDashboardModelUrl",()=>r]);let t=(e,t,r)=>{let s=new URLSearchParams;return s.set("modelId",e),t&&s.set("taskId",t),r&&s.set("text",r),"/app/text-to-speech/?".concat(s.toString())},r=e=>"/app/m/".concat(e)},419751,e=>{"use strict";e.s(["DelModelDialog",()=>d]);var t=e.i(843476),r=e.i(271645),s=e.i(435322),a=e.i(531278),l=e.i(585264),n=e.i(163850),i=e.i(258679),o=e.i(846696);let d=(0,r.forwardRef)((e,r)=>{let{className:d,id:c,confirmDelete:u,setConfirmDelete:m,onDeleted:h,...x}=e,p=(0,l.useTranslations)("my-models"),[f,g]=(0,n.useAsyncFn)(async function(){await (0,i.deleteModel)({id:c}),m(!1),o.toast.success(p("delete-success")),null==h||h()},[c,m,h]);return(0,t.jsx)(s.AlertDialog,{open:u,children:(0,t.jsxs)(s.AlertDialogContent,{children:[(0,t.jsx)(s.AlertDialogHeader,{children:(0,t.jsx)(s.AlertDialogTitle,{children:p("delete-confirm.title")})}),(0,t.jsx)(s.AlertDialogDescription,{}),(0,t.jsxs)(s.AlertDialogFooter,{children:[(0,t.jsx)(s.AlertDialogCancel,{onClick:()=>m(!1),children:p("delete-confirm.cancel")}),(0,t.jsxs)(s.AlertDialogAction,{disabled:f.loading,onClick:g,children:[f.loading&&(0,t.jsx)(a.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),p("delete-confirm.confirm")]})]})]})})});d.displayName="DelModelDialog"},617628,891370,e=>{"use strict";e.s(["DashboardMyModelListCard",()=>eu,"StatusBadge",()=>ec],617628);var t,r=e.i(843476),s=e.i(271645),a=e.i(647163),l=e.i(576167),n=e.i(200997),i=e.i(523934),o=e.i(531278),d=e.i(323585),c=e.i(788699),u=e.i(727612),m=e.i(286536),h=e.i(431343),x=e.i(495242),p=e.i(662031),f=e.i(730062),g=e.i(4272),v=e.i(681846),j=e.i(585264),b=e.i(94747),w=e.i(160889);e.s(["DashboardTimeLineSamples",()=>el],891370);var y=e.i(481417),N=e.i(115052),k=e.i(981140),C=e.i(30030),D=e.i(369340),_=e.i(820783),P=e.i(853660),M=e.i(774606),T=e.i(296626),S=e.i(248425),A=e.i(726330),R="HoverCard",[I,F]=(0,C.createContextScope)(R,[P.createPopperScope]),L=(0,P.createPopperScope)(),[E,U]=I(R),z=e=>{let{__scopeHoverCard:t,children:a,open:l,defaultOpen:n,onOpenChange:i,openDelay:o=700,closeDelay:d=300}=e,c=L(t),u=s.useRef(0),m=s.useRef(0),h=s.useRef(!1),x=s.useRef(!1),[p,f]=(0,D.useControllableState)({prop:l,defaultProp:null!=n&&n,onChange:i,caller:R}),g=s.useCallback(()=>{clearTimeout(m.current),u.current=window.setTimeout(()=>f(!0),o)},[o,f]),v=s.useCallback(()=>{clearTimeout(u.current),h.current||x.current||(m.current=window.setTimeout(()=>f(!1),d))},[d,f]),j=s.useCallback(()=>f(!1),[f]);return s.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(m.current)},[]),(0,r.jsx)(E,{scope:t,open:p,onOpenChange:f,onOpen:g,onClose:v,onDismiss:j,hasSelectionRef:h,isPointerDownOnContentRef:x,children:(0,r.jsx)(P.Root,{...c,children:a})})};z.displayName=R;var H="HoverCardTrigger",B=s.forwardRef((e,t)=>{let{__scopeHoverCard:s,...a}=e,l=U(H,s),n=L(s);return(0,r.jsx)(P.Anchor,{asChild:!0,...n,children:(0,r.jsx)(S.Primitive.a,{"data-state":l.open?"open":"closed",...a,ref:t,onPointerEnter:(0,k.composeEventHandlers)(e.onPointerEnter,G(l.onOpen)),onPointerLeave:(0,k.composeEventHandlers)(e.onPointerLeave,G(l.onClose)),onFocus:(0,k.composeEventHandlers)(e.onFocus,l.onOpen),onBlur:(0,k.composeEventHandlers)(e.onBlur,l.onClose),onTouchStart:(0,k.composeEventHandlers)(e.onTouchStart,e=>e.preventDefault())})})});B.displayName=H;var O="HoverCardPortal",[V,W]=I(O,{forceMount:void 0}),Y=e=>{let{__scopeHoverCard:t,forceMount:s,children:a,container:l}=e,n=U(O,t);return(0,r.jsx)(V,{scope:t,forceMount:s,children:(0,r.jsx)(T.Presence,{present:s||n.open,children:(0,r.jsx)(M.Portal,{asChild:!0,container:l,children:a})})})};Y.displayName=O;var q="HoverCardContent",K=s.forwardRef((e,t)=>{let s=W(q,e.__scopeHoverCard),{forceMount:a=s.forceMount,...l}=e,n=U(q,e.__scopeHoverCard);return(0,r.jsx)(T.Presence,{present:a||n.open,children:(0,r.jsx)(Q,{"data-state":n.open?"open":"closed",...l,onPointerEnter:(0,k.composeEventHandlers)(e.onPointerEnter,G(n.onOpen)),onPointerLeave:(0,k.composeEventHandlers)(e.onPointerLeave,G(n.onClose)),ref:t})})});K.displayName=q;var Q=s.forwardRef((e,a)=>{let{__scopeHoverCard:l,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:d,...c}=e,u=U(q,l),m=L(l),h=s.useRef(null),x=(0,_.useComposedRefs)(a,h),[p,f]=s.useState(!1);return s.useEffect(()=>{if(p){let e=document.body;return t=e.style.userSelect||e.style.webkitUserSelect,e.style.userSelect="none",e.style.webkitUserSelect="none",()=>{e.style.userSelect=t,e.style.webkitUserSelect=t}}},[p]),s.useEffect(()=>{if(h.current){let e=()=>{f(!1),u.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var e;(null==(e=document.getSelection())?void 0:e.toString())!==""&&(u.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",e),()=>{document.removeEventListener("pointerup",e),u.hasSelectionRef.current=!1,u.isPointerDownOnContentRef.current=!1}}},[u.isPointerDownOnContentRef,u.hasSelectionRef]),s.useEffect(()=>{h.current&&(function(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;r.nextNode();)t.push(r.currentNode);return t})(h.current).forEach(e=>e.setAttribute("tabindex","-1"))}),(0,r.jsx)(A.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:d,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:(0,k.composeEventHandlers)(o,e=>{e.preventDefault()}),onDismiss:u.onDismiss,children:(0,r.jsx)(P.Content,{...m,...c,onPointerDown:(0,k.composeEventHandlers)(c.onPointerDown,e=>{e.currentTarget.contains(e.target)&&f(!0),u.hasSelectionRef.current=!1,u.isPointerDownOnContentRef.current=!0}),ref:x,style:{...c.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})});function G(e){return t=>"touch"===t.pointerType?void 0:e()}s.forwardRef((e,t)=>{let{__scopeHoverCard:s,...a}=e,l=L(s);return(0,r.jsx)(P.Arrow,{...l,...a,ref:t})}).displayName="HoverCardArrow";let J=s.forwardRef((e,t)=>{let{className:s,align:l="center",sideOffset:n=4,...i}=e;return(0,r.jsx)(Y,{children:(0,r.jsx)(K,{ref:t,align:l,sideOffset:n,className:(0,a.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});J.displayName=K.displayName;var X=e.i(951577),Z=e.i(790830),$=e.i(941855),ee=e.i(880145);let et=s.forwardRef((e,t)=>{let{className:l,index:n,data:i,isPlay:d,currentPlaying:c,onPlayAudio:u,...m}=e,{isCN:h}=(0,$.useEnvironment)(),p=(0,Z.useAudioRef)(),[f,v]=s.useState(!1),j=i.audio||"",b=j.startsWith("http")?(0,a.formatAudioUrl)(j,h):(0,a.getAudioUrl)(j,h);return(0,r.jsxs)("div",{onClick:()=>{if(p.current)try{p.current.paused?u(p.current,!1):u(p.current,!0)}catch(e){console.error(e)}},className:"flex cursor-pointer items-center gap-3 rounded-xl border p-3 transition-colors hover:bg-muted/50",children:[(0,r.jsx)("audio",{className:"hidden",src:b,controls:!1,onEnded:()=>u(p.current,!0),onError:()=>v(!1),onCanPlayThrough:()=>v(!1),ref:p,preload:"none"}),(0,r.jsx)(g.Button,{className:"h-10 w-10 shrink-0 rounded-full hover:bg-transparent",variant:"ghost",size:"icon","aria-label":d?"Pause":"Play",children:f?(0,r.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):c===p.current?(0,r.jsx)(r.Fragment,{children:d?(0,r.jsx)(x.Pause,{}):(0,r.jsx)(X.PlayIcon,{})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(X.PlayIcon,{})})}),(0,r.jsx)("div",{className:"min-w-0 flex-1",children:(0,r.jsx)("div",{className:"line-clamp-2 text-sm text-muted-foreground",title:i.text,children:i.text})})]},n)});et.displayName="DashboardSamplesCard";let er=s.forwardRef((e,t)=>{var s;let{className:l,list:n,...i}=e,o=(0,j.useTranslations)("m"),{currentPlaying:d,isPlay:c,handlePlayAudio:u}=(0,ee.useDashboardAudioControl)();return(0,r.jsx)("div",{className:(0,a.cn)("h-full flex-auto overflow-y-auto rounded-2xl border bg-card p-3 text-card-foreground",l),children:(0,r.jsxs)("div",{className:"flex flex-auto flex-col gap-2 overflow-y-auto",children:[!(null==n?void 0:n.length)&&(0,r.jsxs)("div",{className:"flex flex-1 flex-col items-center gap-4 p-20",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gray-4",children:(0,r.jsx)(y.FileVolume2,{className:"h-6 w-6 text-gray-1"})}),(0,r.jsx)("div",{className:"text-sm text-gray-1",children:o("no_audio_sample_tips")})]}),null==n||null==(s=n.map)?void 0:s.call(n,(e,t)=>(0,r.jsx)(et,{index:t,data:e,isPlay:c,currentPlaying:d,onPlayAudio:u},t))]})})});er.displayName="DashboardSamplesBanner";var es=e.i(593438);let ea=["group-[.timeline]:last:after:content-none","group-[.timeline]:after:content-[' ']","group-[.timeline]:after:block","group-[.timeline]:after:w-1.5","group-[.timeline]:after:h-1.5","group-[.timeline]:after:mx-2","group-[.timeline]:after:bg-timeline-pointground","group-[.timeline]:after:rounded-full","group-[.timeline]:after:self-center"],el=s.forwardRef((e,t)=>{var s,l;let{className:n,list:i}=e,o=(0,j.useTranslations)("discovery"),d=(0,N.useIsMobile)();return(0,r.jsxs)("div",{ref:t,className:(0,a.cn)(n,"flex items-center text-sm text-muted-foreground",ea),children:[(0,r.jsx)(y.FileVolume2,{className:(0,a.cn)("h4 mr-2 w-4 text-gray-1")}),d?(0,r.jsxs)(es.Drawer,{children:[(0,r.jsx)(es.DrawerTrigger,{children:(0,r.jsxs)("div",{children:[null!=(l=null==i?void 0:i.length)?l:0," ",o("audio_samples")]})}),(0,r.jsx)(es.DrawerOverlay,{className:"fixed inset-0 bg-black/40"}),(0,r.jsxs)(es.DrawerContent,{className:"pb-6",children:[(0,r.jsx)(er,{className:"border-none",list:i}),(0,r.jsx)(es.DrawerFooter,{className:"pt-2"})]})]}):(0,r.jsxs)(z,{openDelay:200,children:[(0,r.jsx)(B,{asChild:!0,children:(0,r.jsxs)("div",{className:"cursor-default transition-colors hover:text-foreground",children:[null!=(s=null==i?void 0:i.length)?s:0," ",o("audio_samples")]})}),(0,r.jsx)(J,{align:"start",className:"rounded-2xl p-0 md:w-[25.125rem]",children:(0,r.jsx)(er,{list:i,className:"rounded-2xl border-none shadow-none"})})]})]})});el.displayName="DashboardTimeLineSamples";var en=e.i(419751),ei=e.i(64585),eo=e.i(846696),ed=e.i(639499);let ec=e=>{let t,{status:s}=e,a=(0,j.useTranslations)("model");switch(s){case"training":t=(0,r.jsx)(f.Badge,{theme:"blue",children:a("state.training")});break;case"trained":t=(0,r.jsx)(f.Badge,{theme:"success",children:a("state.trained")});break;case"failed":t=(0,r.jsx)(f.Badge,{theme:"info",children:a("state.failed")});break;default:t=(0,r.jsx)(f.Badge,{theme:"destructive",children:a("state.created")})}return t},eu=s.forwardRef((e,t)=>{var f,y,N,k,C;let{className:D,data:_,onDeleted:P,...M}=e,T=(0,j.useTranslations)("my-models"),S=(0,w.useRouter)(),{user:A}=(0,ei.useUser)(),[R,I]=(0,s.useState)(!1),{isCN:F}=(0,$.useEnvironment)(),L=(0,Z.useAudioRef)(),{currentPlaying:E,isPlay:U,handlePlayAudio:z}=(0,ee.useDashboardAudioControl)(),H=(null==(y=_.samples)||null==(f=y[0])?void 0:f.audio)||"",B=H.startsWith("http")?(0,a.formatAudioUrl)(H,F):(0,a.getAudioUrl)(H,F),O=null==(k=_.samples)||null==(N=k[0])?void 0:N.audio;function V(){try{sessionStorage.setItem("tts_draft_model_id",_._id),sessionStorage.removeItem("tts_draft_text")}catch(e){}S.push("/app/text-to-speech/")}let[W,Y]=s.useState(!1),[q,K]=s.useState(!1);return(0,r.jsxs)(l.Card,{className:(0,a.cn)("",D,"trained"===_.state?"cursor-pointer transition-colors":""),onClick:function(e){e.target.closest('button, a, [role="button"]')||"trained"!==_.state||q||W||V()},...M,ref:t,children:[(0,r.jsxs)(l.CardContent,{className:"relative flex overflow-hidden px-4 py-3 md:p-5",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.Avatar,{className:"mt-1 h-12 w-12 rounded-md md:mt-0 md:h-14 md:w-14 md:rounded-lg",children:(0,r.jsx)(n.AvatarImage,{src:(0,a.fetchImage)(_.cover_image),alt:_.title})}),O&&(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),(()=>{var e,t;if(L.current&&(null==(t=_.samples)||null==(e=t[0])?void 0:e.audio))try{L.current.paused?z(L.current,!1):z(L.current,!0)}catch(e){console.error(e)}})()},className:"group absolute left-0 top-1 flex h-12 w-12 items-center justify-center rounded-md bg-black/0 transition-all duration-200 hover:bg-black/20 dark:hover:bg-white/10 md:top-0 md:h-14 md:w-14 md:rounded-lg",children:(0,r.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/20 shadow-md transition-all duration-200 group-hover:scale-110 group-hover:bg-white/50 dark:bg-black/30 dark:group-hover:bg-black/60 md:h-8 md:w-8",children:function(){var e,t;return(null==(t=_.samples)||null==(e=t[0])?void 0:e.audio)?R?(0,r.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin text-gray-600 dark:text-gray-300"}):E===L.current&&U?(0,r.jsx)(x.Pause,{size:16,className:"text-gray-700 dark:text-gray-200"}):(0,r.jsx)(h.Play,{size:16,className:"text-gray-700 dark:text-gray-200"}):null}()})})]}),(0,r.jsxs)("div",{className:"mb-10 ml-3 flex min-w-0 flex-1 max-md:flex-col md:mb-0 md:ml-0",children:[(0,r.jsxs)("div",{className:"min-w-0 md:ml-4 md:max-w-[18.75rem] md:flex-1",children:[(0,r.jsx)("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap text-base font-semibold md:text-lg",children:_.title}),(0,r.jsx)("div",{className:"mt-1 hidden overflow-hidden text-ellipsis whitespace-nowrap text-sm text-gray-1 md:block",children:_.description})]}),(0,r.jsxs)("div",{className:"flex flex-shrink-0 justify-end max-md:mt-2 max-md:flex-row-reverse",children:[(0,r.jsxs)("div",{className:"md:ml-4 md:hidden xl:block xl:w-[10rem] 2xl:w-[12rem]",children:[(0,r.jsx)("span",{className:"hidden text-sm text-gray-1 md:inline-block",children:T("create-at")}),(0,r.jsxs)("div",{className:"ml-2 flex items-center md:ml-0 md:mt-2",children:[(0,r.jsx)("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-lg",children:(0,r.jsx)(i.Clock3,{className:"h-4 w-4 text-timeline-icon"})}),(0,r.jsx)("div",{className:"ml-2 whitespace-nowrap text-xs md:ml-3 md:text-sm md:font-semibold",children:(0,b.default)(_.created_at).format("MMM D, YYYY, H:mm")})]})]}),(0,r.jsxs)("div",{className:"md:ml-4 md:hidden lg:block lg:w-[6rem] xl:w-[8rem] 2xl:w-[10.25rem]",children:[(0,r.jsx)("span",{className:"hidden text-sm text-gray-1 md:inline-block",children:T("status")}),(0,r.jsx)("div",{className:"flex md:mt-2",children:(0,r.jsx)(ec,{status:_.state})})]}),!!(null==(C=_.samples)?void 0:C.length)&&(0,r.jsxs)("div",{className:"hidden md:ml-4 md:block md:w-[9rem] xl:w-[10.25rem]",children:[(0,r.jsx)("span",{className:"hidden text-sm text-gray-1 md:inline-block",children:T("audio_samples")}),(0,r.jsx)("div",{className:"flex md:mt-2",children:(0,r.jsx)(el,{className:"line-clamp-2 max-md:after:content-none",list:_.samples})})]})]})]}),(0,r.jsx)("div",{className:"flex flex-shrink-0 justify-end md:mr-5 md:items-center",children:(0,r.jsxs)("div",{className:"flex max-md:absolute max-md:bottom-0 max-md:left-0 max-md:w-full max-md:px-4 max-md:py-3",children:[(0,r.jsx)(g.Button,{onClick:e=>{e.stopPropagation(),V()},className:"flex-1 max-md:h-7 max-md:py-0.5 md:flex-none",children:T("use_voice")}),(0,r.jsxs)(v.DropdownMenu,{open:q,onOpenChange:K,children:[(0,r.jsx)(v.DropdownMenuTrigger,{asChild:!0,children:(0,r.jsx)(g.Button,{variant:"ghost",className:(0,a.cn)("ml-3 max-md:h-7"),size:"icon",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(d.MoreVertical,{className:"w-4 text-gray-1"})})}),(0,r.jsxs)(v.DropdownMenuContent,{align:"end",children:[(0,r.jsxs)(v.DropdownMenuItem,{onClick:e=>{e.stopPropagation(),S.push((0,ed.getDashboardModelUrl)(_._id))},className:"cursor-pointer",children:[(0,r.jsx)(m.Eye,{className:"mr-2 h-4 w-4"}),T("view")]}),(null==A?void 0:A._id)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(v.DropdownMenuItem,{onClick:e=>{e.stopPropagation(),S.push("".concat((0,ed.getDashboardModelUrl)(_._id),"/edit"))},className:"cursor-pointer",children:[(0,r.jsx)(c.Pencil,{className:"mr-2 h-4 w-4"}),T("edit")]}),(0,r.jsxs)(v.DropdownMenuItem,{onClick:e=>{e.stopPropagation();try{let e=(0,ed.getDashboardInstantSpeechUrl)(_._id,void 0,""),t=window.location.origin,r="".concat(t).concat(e);navigator.clipboard.writeText(r),eo.toast.success("Link copied")}catch(e){console.error("Failed to copy link",e),eo.toast.error("Failed to copy link")}},className:"cursor-pointer",children:[(0,r.jsx)(p.Share2,{className:"mr-2 h-4 w-4"}),"Share Link"]}),(0,r.jsxs)(v.DropdownMenuItem,{onClick:e=>{e.stopPropagation(),Y(!0)},className:"text-red-600 focus:text-red-600 cursor-pointer",children:[(0,r.jsx)(u.Trash2,{className:"mr-2 h-4 w-4"}),T("delete")]})]})]})]})]})}),O&&(0,r.jsx)("audio",{className:"hidden",src:B,controls:!1,onEnded:()=>z(L.current,!0),onError:()=>I(!1),onCanPlayThrough:()=>I(!1),ref:L})]}),(0,r.jsx)(en.DelModelDialog,{id:_._id,confirmDelete:W,setConfirmDelete:Y,onDeleted:P})]})});eu.displayName="DashboardMyModelListCard"}]);