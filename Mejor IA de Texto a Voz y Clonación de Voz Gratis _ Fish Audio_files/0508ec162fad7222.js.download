(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62932,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("file-plus-corner",[["path",{d:"M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35",key:"17jvcc"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M14 19h6",key:"bvotb8"}],["path",{d:"M17 16v6",key:"18yu1i"}]])},370144,e=>{"use strict";e.s(["FilePlus2",()=>t.default]);var t=e.i(62932)},236579,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]])},653860,e=>{"use strict";e.s(["FileUpload",()=>c,"Input",()=>i,"InputV2",()=>o,"InputV2Slot",()=>d],653860);var t=e.i(843476),s=e.i(271645),a=e.i(647163),l=e.i(370144),r=e.i(236579),r=r,n=e.i(657688);let i=s.forwardRef((e,s)=>{let{className:l,type:r,...n}=e;return"textarea"===r?(0,t.jsx)("textarea",{className:(0,a.cn)("flex h-32 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:s,...n}):(0,t.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:s,...n})});i.displayName="Input";let o=s.forwardRef((e,l)=>{let{className:r,type:n,children:i,...o}=e,d=s.useRef(null);return s.useImperativeHandle(l,()=>d.current,[d]),(0,t.jsxs)("div",{className:(0,a.cn)("flex h-10 w-full items-center gap-2 overflow-hidden rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-within:outline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),children:[(0,t.jsx)("input",{type:n,className:"w-0 min-w-2 flex-1 bg-transparent outline-none",ref:d,...o}),i]})});o.displayName="InputV2";let d=s.forwardRef((e,s)=>{let{className:l,side:r,...n}=e;return(0,t.jsx)("div",{className:(0,a.cn)({"-order-1":"right"!==r},"h-6 w-6 text-center leading-6",l),ref:s,...n})});d.displayName="InputV2Slot",s.forwardRef((e,l)=>{let{className:i,file:o,img:d,alt:c,...u}=e,x=s.useRef(null);s.useImperativeHandle(l,()=>x.current);let m=s.useMemo(()=>{if("string"==typeof o)return o;if(o&&o instanceof Blob&&o.type&&o.type.includes("image")){let e=URL.createObjectURL(o);return e&&""+e}return d},[o,d]);return s.useEffect(()=>()=>{m&&"string"==typeof m&&m.startsWith("blob:")&&URL.revokeObjectURL(m)},[m]),(0,t.jsxs)("div",{className:(0,a.cn)("border-file-upload-icon flex h-24 w-24 items-center justify-center rounded-md border border-dashed border-opacity-50 dark:border-white",i),onClick:function(){var e;null==(e=x.current)||e.click()},children:[m?(0,t.jsx)(n.default,{loading:"lazy",src:m,layout:"fill",className:"!relative h-full w-full object-cover",alt:c||""}):(0,t.jsx)(r.default,{className:"text-gray-1"}),(0,t.jsx)("input",{className:"hidden",ref:x,type:"file",accept:"image/jpeg,image/png,image/gif",...u})]})}).displayName="PictureUpload";let c=s.forwardRef((e,r)=>{let{className:n,children:i,dropable:o=!1,onChange:d,...c}=e,u=s.useRef(null);return s.useImperativeHandle(r,()=>u.current),(0,t.jsxs)("div",{className:(0,a.cn)("flex items-center rounded-md border border-dashed border-file-upload-border border-opacity-50 p-4",n),onClick:function(){var e;null==(e=u.current)||e.click()},onDragOverCapture:o?function(e){e.preventDefault(),e.stopPropagation()}:void 0,onDropCapture:o?function(e){e.preventDefault(),e.stopPropagation();let t=e.dataTransfer.files;t.length>0&&(null==d||d(t))}:void 0,children:[(0,t.jsx)("div",{className:"dark:bg-file-upload-icon-bg flex h-11 w-11 items-center justify-center rounded-lg bg-timeline-pointground",children:(0,t.jsx)(l.FilePlus2,{className:"text-file-upload-icon"})}),i,(0,t.jsx)("input",{className:"hidden",ref:u,type:"file",...c,onChange:function(e){e.target.files&&(null==d||d(e.target.files))}})]})});c.displayName="FileUpload"},107233,603908,e=>{"use strict";e.s(["Plus",()=>t],107233),e.s(["default",()=>t],603908);let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},80897,814091,e=>{"use strict";e.s(["DiscoveryPageFilter",()=>S,"DiscoveryPageSort",()=>C,"DiscoveryPageSortContext",()=>y,"LanguageFilter",()=>k,"languageNameMap",()=>w],80897);var t=e.i(843476),s=e.i(67199),a=e.i(129402),l=e.i(643531),r=e.i(271645),n=e.i(4272),i=e.i(653860),o=e.i(730062);e.s(["default",()=>d],814091);let d=(0,e.i(475254).default)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);var c=e.i(37727),u=e.i(162353),x=e.i(129160),m=e.i(593438),h=e.i(115052),p=e.i(647163),f=e.i(664659),g=e.i(600743),v=e.i(585264);function j(e){let{options:s,value:a,onChange:i,placeholder:o="Select languages",className:d,triggerClassName:c}=e,[u,m]=(0,r.useState)(!1),h=(0,v.useTranslations)("discovery"),j=(0,r.useRef)(null),[b,y]=(0,r.useState)(0);(0,r.useEffect)(()=>{j.current&&y(j.current.offsetWidth)},[u]);let w=e=>{if("all"===e)i(a.includes("all")?[]:["all"]);else{let t=a.filter(e=>"all"!==e);t.includes(e)?i(t.filter(t=>t!==e)):i([...t,e])}};return(0,t.jsxs)(x.Popover,{open:u,onOpenChange:m,children:[(0,t.jsx)(x.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{ref:j,variant:"outline",role:"combobox","aria-expanded":u,className:(0,p.cn)("w-full justify-between rounded-xl border bg-background font-normal",c),children:[(0,t.jsxs)("span",{className:"flex items-center gap-2 truncate",children:[1===a.length&&!a.includes("all")&&(0,t.jsx)(g.TwemojiFlag,{locale:a[0],size:16}),(()=>{if(0===a.length)return o;if(a.includes("all"))return h("filter.language.all");if(1===a.length){let e=s.find(e=>e.value===a[0]);return(null==e?void 0:e.label)||a[0]}return"".concat(a.length," ").concat(h("filter.language.selected"))})()]}),(0,t.jsx)(f.ChevronDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsx)(x.PopoverContent,{className:(0,p.cn)("rounded-xl p-1",d),style:{width:b>0?b:"auto"},align:"start",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.Button,{type:"button",variant:"ghost",className:(0,p.cn)("flex h-auto w-full cursor-pointer items-center justify-between rounded-xl px-2 py-1.5 text-sm font-normal",a.includes("all")&&"bg-accent/50"),onClick:()=>w("all"),children:[(0,t.jsx)("span",{children:h("filter.language.all")}),a.includes("all")&&(0,t.jsx)(l.Check,{className:"h-4 w-4 text-primary"})]}),s.map(e=>{let s=a.includes(e.value);return(0,t.jsxs)(n.Button,{type:"button",variant:"ghost",className:(0,p.cn)("flex h-auto w-full cursor-pointer items-center justify-between rounded-xl px-2 py-1.5 text-sm font-normal",s&&"bg-accent/50"),onClick:()=>w(e.value),children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.TwemojiFlag,{locale:e.value,size:16}),e.label]}),s&&(0,t.jsx)(l.Check,{className:"h-4 w-4 text-primary"})]},e.value)})]})})]})}var b=e.i(462837);let y=(0,r.createContext)({form:{sort_by:"score",tags:[],languages:[],search:void 0},lngOpts:[],updateForm:()=>{}}),w={zh:"汉语",en:"English",ja:"日本語",de:"Deutsch",fr:"Français",es:"Español",ko:"한국어",ar:"العربية",ru:"Русский",nl:"Nederlands",it:"Italiano",pl:"Polski",pt:"Português"},N=(0,r.forwardRef)((e,r)=>{let{sortBy:n,onSortChange:i}=e,o=(0,v.useTranslations)("discovery");return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-4 text-sm font-medium text-muted-foreground max-md:hidden",children:o("sort.title")}),(0,t.jsxs)(s.Select,{value:n,onValueChange:e=>i(e),children:[(0,t.jsx)(s.SelectTrigger,{className:"w-[180px] rounded-xl border bg-background",children:(0,t.jsx)(s.SelectValue,{})}),(0,t.jsxs)(s.SelectContent,{className:"rounded-xl",children:[(0,t.jsxs)(a.Item,{value:"score",className:"relative flex w-full cursor-default select-none items-center justify-between rounded-xl px-3 py-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",children:[(0,t.jsx)(a.ItemText,{children:o("sort.count")}),(0,t.jsx)(a.ItemIndicator,{children:(0,t.jsx)(l.Check,{className:"h-4 w-4"})})]}),(0,t.jsxs)(a.Item,{value:"created_at",className:"relative flex w-full cursor-default select-none items-center justify-between rounded-xl px-3 py-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",children:[(0,t.jsx)(a.ItemText,{children:o("sort.new")}),(0,t.jsx)(a.ItemIndicator,{children:(0,t.jsx)(l.Check,{className:"h-4 w-4"})})]})]})]})]})}),k=(0,r.forwardRef)((e,r)=>{let{languageValue:n,onLanguageChange:i,languageOptions:o,disabled:d,disabledCount:c}=e,u=(0,v.useTranslations)("discovery"),x=[...new Set([...o,"ru","pt"])],m=d&&c?"".concat(c," ").concat(u("filter.language.selected")):void 0,h=(0,t.jsxs)("div",{className:"hidden items-center md:flex",children:[(0,t.jsx)("span",{className:"mr-4 text-sm font-medium text-muted-foreground",children:u("filter.language.title")}),(0,t.jsxs)(s.Select,{value:d?"":n,onValueChange:i,disabled:d,children:[(0,t.jsx)(s.SelectTrigger,{className:(0,p.cn)("w-[180px] rounded-xl border bg-background",d&&"cursor-not-allowed opacity-50"),children:m?(0,t.jsx)("span",{children:m}):(0,t.jsx)(s.SelectValue,{placeholder:u("filter.language.placeholder")})}),(0,t.jsxs)(s.SelectContent,{className:"rounded-xl",children:[(0,t.jsxs)(a.Item,{value:"all",className:"relative flex w-full cursor-default select-none items-center justify-between rounded-xl px-3 py-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",children:[(0,t.jsx)(a.ItemText,{children:u("filter.language.all")}),(0,t.jsx)(a.ItemIndicator,{children:(0,t.jsx)(l.Check,{className:"h-4 w-4"})})]}),x.map(e=>(0,t.jsxs)(a.Item,{value:e,className:"relative flex w-full cursor-default select-none items-center justify-between rounded-xl px-3 py-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",children:[(0,t.jsx)(a.ItemText,{children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.TwemojiFlag,{locale:e,size:16}),w[e]||e]})}),(0,t.jsx)(a.ItemIndicator,{children:(0,t.jsx)(l.Check,{className:"h-4 w-4"})})]},e))]})]})]});return d?(0,t.jsx)(b.TooltipProvider,{children:(0,t.jsxs)(b.Tooltip,{children:[(0,t.jsx)(b.TooltipTrigger,{asChild:!0,children:h}),(0,t.jsx)(b.TooltipContent,{children:(0,t.jsx)("p",{children:u("filter.language.disabled_hint")})})]})}):h});function C(){(0,v.useTranslations)("discovery");let{updateForm:e,form:s,lngOpts:a}=(0,r.useContext)(y),l=s.languages.length>1,n=0===s.languages.length||s.languages.includes("all")?"all":s.languages[0];return(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(N,{sortBy:s.sort_by,onSortChange:t=>e({...s,sort_by:t})}),(0,t.jsx)(k,{languageValue:l?"all":n,onLanguageChange:t=>e({...s,languages:"all"===t?[]:[t]}),languageOptions:a,disabled:l,disabledCount:l?s.languages.length:void 0})]})}let T=(0,r.forwardRef)((e,s)=>{let{title:a,children:l,className:r,...n}=e;return(0,t.jsxs)("div",{ref:s,className:"mb-6",...n,children:[(0,t.jsx)("h4",{className:"mb-1.5 text-sm font-medium",children:a}),l]})});function S(e){let{context:s=y}=e,a=(0,v.useTranslations)("discovery"),l=(0,v.useTranslations)("train-new-model.suggested-tags"),f=(0,v.useTranslations)("train-new-model.tag-categories"),g=(0,h.useIsMobile)(),[b,N]=(0,r.useState)(!1),[k,C]=(0,r.useState)(""),[S,D]=(0,r.useState)(new Set),M=(0,t.jsx)(n.Button,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-xl",children:(0,t.jsx)(d,{className:"h-4 w-4"})}),{updateForm:I,form:_,lngOpts:F}=(0,r.useContext)(s),P=(0,v.useLocale)(),[L,z]=(0,r.useState)({tags:_.tags,languages:_.languages});function A(e){L.tags.includes(e)?z({...L,tags:L.tags.filter(t=>t!==e)}):z({...L,tags:[...L.tags,e]})}(0,r.useEffect)(()=>{z({tags:_.tags,languages:_.languages})},[_]);let R=k.trim().toLowerCase(),B=R.length>0,E=Object.entries(u.TAG_CATEGORIES).map(e=>{let[t,s]=e,a=[...s.tags];return B&&(a=a.filter(e=>l(e).toLowerCase().includes(R)||e.includes(R))),{categoryKey:t,category:s,availableTags:a}}),V=(0,t.jsx)(n.Button,{variant:"link",size:"sm",className:"h-auto p-0 text-muted-foreground hover:text-foreground",onClick:function(){z({tags:[],languages:["zh-CN"===P?"zh":P]}),C(""),D(new Set)},children:a("reset")}),U=(0,t.jsxs)("div",{className:"relative flex max-h-[70vh] flex-col p-4 md:max-h-[50vh] md:p-1",children:[g?(0,t.jsxs)(m.DrawerHeader,{className:"-mt-6 mb-4 flex items-center justify-between p-0",children:[(0,t.jsx)(m.DrawerTitle,{children:a("filter.title")}),(0,t.jsxs)("div",{className:"flex gap-4",children:[V,(0,t.jsx)(m.DrawerClose,{className:"text-muted-foreground",children:(0,t.jsx)(c.X,{className:"h-5 w-5"})})]})]}):(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:a("filter.title")}),V]}),(0,t.jsxs)("div",{"data-vaul-no-drag":!0,className:"min-h-0 flex-1 touch-pan-y overflow-y-auto",children:[(0,t.jsxs)(T,{title:a("filter.language.title_plural"),children:[(0,t.jsx)("p",{className:"mb-2 text-xs text-muted-foreground",children:a("filter.language.match_all_hint")}),(0,t.jsx)(j,{options:[...new Set([...F,"ru","pt"])].map(e=>({value:e,label:w[e]||e})),value:L.languages,onChange:e=>z({...L,languages:e}),placeholder:a("filter.language.placeholder"),triggerClassName:"w-full"})]}),(0,t.jsxs)(T,{title:a("filter.tags.title"),children:[(0,t.jsxs)("div",{className:"relative mb-3",children:[(0,t.jsx)(i.Input,{type:"text",value:k,onChange:e=>C(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&k.trim()){e.preventDefault();let t=k.trim();L.tags.includes(t)||z({...L,tags:[...L.tags,t]}),C("")}},placeholder:a("filter.tags.placeholder"),className:"rounded-xl"}),k.trim()&&(0,t.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-muted-foreground",children:"Press Enter to add"})]}),L.tags.filter(e=>!u.SUGGESTED_TAG_KEYS.includes(e)).length>0&&(0,t.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:L.tags.filter(e=>!u.SUGGESTED_TAG_KEYS.includes(e)).map(e=>(0,t.jsxs)(o.Badge,{variant:"outline",className:"cursor-pointer border-primary bg-primary/10 font-normal text-primary hover:bg-primary/20",onClick:()=>A(e),children:[e,(0,t.jsx)(c.X,{className:"ml-1 h-3 w-3"})]},e))}),(0,t.jsx)("div",{className:"space-y-3",children:E.map(e=>{let{categoryKey:s,category:a,availableTags:r}=e;if(0===r.length)return null;let i=S.has(s),d=B||i?r:r.slice(0,6),c=r.length-6;return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-1.5 text-xs font-medium text-muted-foreground",children:f(a.labelKey)}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[d.map(e=>{let s=L.tags.includes(e);return(0,t.jsx)(o.Badge,{variant:"outline",className:(0,p.cn)("cursor-pointer whitespace-nowrap font-normal transition-colors",s?"border-primary bg-primary/10 text-primary hover:bg-primary/20":"hover:border-primary hover:text-primary"),onClick:()=>{A(e),C("")},children:l(e)},e)}),c>0&&!B&&(0,t.jsx)(n.Button,{type:"button",variant:"ghost",onClick:()=>{D(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},className:"h-auto px-2 py-1 text-xs text-primary underline-offset-2 hover:bg-transparent hover:underline",children:i?f("showLess"):f("showMoreCount",{count:c})})]})]},s)})})]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(n.Button,{className:"w-full rounded-xl",onClick:function(){I({..._,...L}),N(!1)},children:a("filter.apply")})})]});return g?(0,t.jsxs)(m.Drawer,{open:b,onOpenChange:N,modal:!1,children:[(0,t.jsx)(m.DrawerTrigger,{asChild:!0,children:M}),(0,t.jsx)(m.DrawerContent,{children:U})]}):(0,t.jsxs)(x.Popover,{open:b,onOpenChange:N,children:[(0,t.jsx)(x.PopoverTrigger,{asChild:!0,children:M}),(0,t.jsx)(x.PopoverContent,{className:"w-80 rounded-xl",align:"end",children:U})]})}T.displayName="DiscoveryPageFormItem",N.displayName="SortFilter",k.displayName="LanguageFilter"},563921,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},972520,e=>{"use strict";e.s(["ArrowRight",()=>t.default]);var t=e.i(563921)},21218,e=>{"use strict";e.s(["Activity",()=>t.default]);var t=e.i(57353)},87309,913497,e=>{"use strict";e.s(["AudioLines",()=>t],87309),e.s(["default",()=>t],913497);let t=(0,e.i(475254).default)("audio-lines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]])},57353,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(475254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},880145,e=>{"use strict";e.s(["DashboardAudioControlProvider",()=>T,"DashboardVoiceCardV2",()=>F,"useDashboardAudioControl",()=>S]);var t=e.i(843476),s=e.i(39839),a=e.i(558249),l=e.i(972520),r=e.i(87309),n=e.i(531278),i=e.i(495242),o=e.i(431343),d=e.i(662031),c=e.i(21218),u=e.i(200997),x=e.i(647163),m=e.i(602596),h=e.i(192049),p=e.i(941855),f=e.i(790830),g=e.i(271645),v=e.i(725626),j=e.i(173601),b=e.i(245046),y=e.i(999445),w=e.i(522016),N=e.i(585264),k=e.i(64585);let C=(0,g.createContext)(null);function T(e){let{children:s}=e,a=(0,m.useAudioUniqueControl)();return(0,t.jsx)(C.Provider,{value:a,children:s})}function S(){let e=(0,g.useContext)(C);if(!e)throw Error("useAudioControl must be used within AudioControlProvider");return e}function D(e){let{data:s,isDesktop:a,className:r}=e;return(0,t.jsxs)("div",{className:(0,x.cn)("flex items-center gap-4 border-b border-std-border-base p-4",r),children:[(0,t.jsx)(w.default,{href:"/app/m/".concat(s._id),children:(0,t.jsx)(u.Avatar,{className:(0,x.cn)("h-14 w-14 rounded-lg"),children:(0,t.jsx)(u.AvatarImage,{src:(0,x.fetchImage)(s.cover_image,a?128:64),alt:s.title})})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-2",children:[(0,t.jsxs)(w.default,{href:"/app/m/".concat(s._id),className:"hover:bg-std-bg-secondary/50 group flex items-center gap-2 rounded-lg px-1 transition-all duration-300",children:[(0,t.jsx)("h3",{className:"min-w-0 flex-1 truncate font-bold text-std-text-heading transition-colors duration-300 group-hover:text-std-text-primary",children:s.title}),(0,t.jsx)("button",{className:"flex-shrink-0 text-std-text-secondary transition-all duration-300 group-hover:translate-x-1 group-hover:text-std-text-primary",children:(0,t.jsx)(l.ArrowRight,{size:20})})]}),(0,t.jsxs)("div",{className:"voice-card-v2__meta flex items-center gap-2",children:[(0,t.jsx)(h.TimeLineUser,{className:"text-std-text-placeholder",linkClassName:"font-semibold",avatar:s.author.avatar,name:s.author.nickname,userId:s.author._id}),(0,t.jsx)("div",{className:"h-1 w-1 rounded-full bg-std-text-placeholder"}),(0,t.jsx)(h.TimeLineDate,{spanClassName:"text-std-text-placeholder",clockClassName:"text-std-text-placeholder h-4 w-4",time:s.created_at})]})]})]})}function M(e){var s,a,l,d,u,m,h,v,j,b,y,w;let{data:k,className:C}=e,T=(0,N.useTranslations)("discovery"),[D,M]=(0,g.useState)(!1),{isCN:I}=(0,p.useEnvironment)(),_=(0,f.useAudioRef)(),{currentPlaying:F,isPlay:P,handlePlayAudio:L}=S(),z=(0,x.formatAudioUrl)((null==(a=k.samples)||null==(s=a[0])?void 0:s.audio)||"",I),A=(null==(d=k.samples)||null==(l=d[0])?void 0:l.text)||(null==(m=k.samples)||null==(u=m[0])?void 0:u.audio);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,x.cn)("flex h-[4.0625rem] gap-2 border-b border-std-border-base p-4",C),children:[(0,t.jsx)("div",{className:"flex flex-1 items-center gap-2 pr-2",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{var e,t;if(_.current&&(null==(t=k.samples)||null==(e=t[0])?void 0:e.audio))try{_.current.paused?L(_.current,!1):L(_.current,!0)}catch(e){console.error(e)}},className:"transition-all duration-200 hover:scale-110 hover:text-std-text-primary",children:(null==(w=k.samples)||null==(y=w[0])?void 0:y.audio)?D?(0,t.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):F===_.current&&P?(0,t.jsx)(i.Pause,{size:18,className:"text-std-text-placeholder"}):(0,t.jsx)(o.Play,{size:18,className:"text-std-text-placeholder"}):null}),(0,t.jsx)("p",{className:"line-clamp-2 text-xs text-std-text-placeholder",children:null==(v=k.samples)||null==(h=v[0])?void 0:h.text})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-std-text-placeholder",children:[(0,t.jsx)(r.AudioLines,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-std-text-placeholder",children:T("no_audio_sample")})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm font-semibold text-std-text-placeholder",children:[(0,t.jsx)(c.Activity,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:(0,x.formatThousandthNumber)(k.task_count||0,1)})]})]}),(null==(b=k.samples)||null==(j=b[0])?void 0:j.audio)&&(0,t.jsx)("audio",{className:"hidden",src:z,controls:!1,onEnded:()=>L(_.current,!0),onError:()=>M(!1),onCanPlayThrough:()=>M(!1),ref:_})]})}let I=function(e){let{data:s,className:a,...l}=e,{like:r,mark:n,count_cache:i,handleLike:o,handleMark:c,share:u}=(0,j.useVoiceCardActions)(s),{isCN:m}=(0,p.useEnvironment)();return(0,t.jsxs)("div",{className:(0,x.cn)("flex gap-3 text-sm",a),...l,children:[!m&&(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2 text-xs md:text-sm",onClick:u,children:[(0,t.jsx)(d.Share2,{className:"h-4 w-4 text-gray-1 md:h-5 md:w-5"}),(0,t.jsx)("span",{children:(0,x.formatThousandthNumber)(i.shared,1)})]}),(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:o,children:[(0,t.jsx)(b.Heart,{className:(0,x.cn)("h-4 w-4 md:h-5 md:w-5",r?"text-red":"text-gray-1"),fillIcon:r}),(0,t.jsx)("span",{children:(0,x.formatThousandthNumber)(i.like,1)})]}),(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:c,children:[(0,t.jsx)(y.Bookmark,{className:(0,x.cn)("h-4 w-4 md:h-5 md:w-5",n?"":"text-gray-1"),fillIcon:n}),(0,t.jsx)("span",{children:(0,x.formatThousandthNumber)(i.mark,1)})]})]})};function _(e){var s,l,n,i,o;let{data:d,className:c}=e,u=(0,N.useTranslations)("discovery"),{user:m}=(0,k.useUser)();return(0,t.jsxs)("div",{className:(0,x.cn)("flex w-full gap-2 p-4",c),children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,t.jsx)("div",{className:"w-12",children:(0,t.jsx)(v.Overflow,{itemClassName:"rounded-lg",maxDisplayCount:1,data:null!=(n=null==(l=d.languages)||null==(s=l.map)?void 0:s.call(l,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()))?n:[]})}),(0,t.jsx)(I,{data:d})]}),(0,t.jsxs)(w.default,{className:"hover:bg-std-bg-secondary/50 flex items-center gap-1 rounded-lg px-2 py-1 text-sm font-semibold text-std-text-placeholder transition-all duration-200 hover:text-std-text-primary",href:(0,x.getInstantSpeechUrl)(d._id,void 0,null==(o=d.samples)||null==(i=o[0])?void 0:i.text).replace("/text-to-speech/","/app/text-to-speech/"),onClick:e=>{(0,a.track)("discover-use-voice-click",{model_id:d._id},m)},children:[(0,t.jsx)(r.AudioLines,{className:"h-4 w-4 md:h-5 md:w-5"}),(0,t.jsx)("span",{children:u("use")})]})]})}function F(e){let{data:a}=e,l=(0,s.useMediaQuery)("(min-width: 768px)");return(0,t.jsxs)("div",{className:"flex flex-col rounded-xl bg-std-bg-card",children:[(0,t.jsx)(D,{data:a,isDesktop:l}),(0,t.jsx)(M,{data:a}),(0,t.jsx)(_,{data:a})]})}},247970,937493,e=>{"use strict";e.s(["MyVoicesNavigationBar",()=>N],247970);var t=e.i(843476),s=e.i(618566),a=e.i(271645),l=e.i(4272),r=e.i(664659),n=e.i(107233),i=e.i(531278),o=e.i(160889),d=e.i(681846),c=e.i(64585),u=e.i(672345);e.s(["CreateCollectionDialog",()=>w],937493);var x=e.i(585264),m=e.i(969520),h=e.i(653860),p=e.i(158079),f=e.i(846696),g=e.i(653145),v=e.i(994814),j=e.i(602946),b=e.i(50270);let y=b.z.object({title:b.z.string().min(1,"Title is required").max(30,"Title must be less than 30 characters"),description:b.z.string().max(100,"Description must be less than 100 characters").optional()});function w(e){let{open:s,onOpenChange:r,onSuccess:n}=e,i=(0,x.useTranslations)("collections"),[o,d]=(0,a.useState)(!1),c=(0,g.useForm)({resolver:(0,v.zodResolver)(y),defaultValues:{title:"",description:""}}),b=async e=>{try{var t;d(!0),await (0,u.createVoiceCollection)({title:e.title,description:null!=(t=e.description)?t:""}),f.toast.success(i("notification.create_success")),n(),r(!1),c.reset()}catch(e){console.error(e)}finally{d(!1)}};return(0,t.jsx)(m.Dialog,{open:s,onOpenChange:r,children:(0,t.jsxs)(m.DialogContent,{children:[(0,t.jsx)(m.DialogHeader,{children:(0,t.jsx)(m.DialogTitle,{children:i("create_title")})}),(0,t.jsx)(j.Form,{...c,children:(0,t.jsxs)("form",{onSubmit:c.handleSubmit(b),className:"space-y-4",children:[(0,t.jsx)(j.FormField,{control:c.control,name:"title",render:e=>{let{field:s}=e;return(0,t.jsxs)(j.FormItem,{children:[(0,t.jsx)(j.FormLabel,{children:i("title")}),(0,t.jsx)(j.FormControl,{children:(0,t.jsx)(h.Input,{placeholder:i("title_placeholder"),...s})}),(0,t.jsx)(j.FormMessage,{})]})}}),(0,t.jsx)(j.FormField,{control:c.control,name:"description",render:e=>{let{field:s}=e;return(0,t.jsxs)(j.FormItem,{children:[(0,t.jsx)(j.FormLabel,{children:i("description")}),(0,t.jsx)(j.FormControl,{children:(0,t.jsx)(p.Textarea,{placeholder:i("description_placeholder"),className:"min-h-[100px]",...s})}),(0,t.jsx)(j.FormMessage,{})]})}}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>r(!1),children:i("cancel")}),(0,t.jsx)(l.Button,{type:"submit",disabled:o,children:o?i("creating"):i("create")})]})]})})]})})}function N(){let e=(0,s.usePathname)(),m=(0,x.useTranslations)("collections"),h=(0,x.useTranslations)("nav"),p=(0,x.useTranslations)("text-to-speech"),f=(0,x.useTranslations)("profile"),{user:g}=(0,c.useUser)(),[v,j]=(0,a.useState)([]),[b,y]=(0,a.useState)(!1),[N,k]=(0,a.useState)(!1),[C,T]=(0,a.useState)(!1),S=t=>"/app/my-voices"===t?"/app/my-voices"===e||"/app/my-voices/"===e:e.startsWith(t),D=(0,a.useCallback)(async()=>{if(null==g?void 0:g._id){y(!0);try{let e=(await (0,u.listVoiceCollection)({})).data.filter(e=>e.user_id===g._id);j(e)}catch(e){console.error("Failed to fetch collections:",e)}finally{y(!1)}}},[null==g?void 0:g._id]);return(0,a.useEffect)(()=>{C&&(null==g?void 0:g._id)&&D()},[C,null==g?void 0:g._id,D]),(0,t.jsxs)("div",{className:"mb-6 w-full overflow-x-auto",children:[(0,t.jsxs)("div",{className:"flex min-w-max items-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",asChild:!0,className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(S("/app/my-voices")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:(0,t.jsx)(o.Link,{href:"/app/my-voices",children:h("my-voice")})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",asChild:!0,className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(S("/app/discovery")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:(0,t.jsx)(o.Link,{href:"/app/discovery",children:h("discovery")})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",asChild:!0,className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(S("/app/default-voices")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:(0,t.jsx)(o.Link,{href:"/app/default-voices",children:p("default_voices")})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",asChild:!0,className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(S("/app/bookmarks")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:(0,t.jsx)(o.Link,{href:"/app/bookmarks",children:f("bookmarks")})}),(0,t.jsxs)(d.DropdownMenu,{open:C,onOpenChange:T,children:[(0,t.jsx)(d.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"whitespace-nowrap rounded-full border-0 bg-transparent px-4 py-5 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground ".concat(e.startsWith("/app/voice-collections")||e.startsWith("/app/collections/")?"bg-gray-200 text-foreground dark:bg-gray-700":""),children:[h("my-voice-collection"),(0,t.jsx)(r.ChevronDown,{className:"ml-1 h-3 w-3"})]})}),(0,t.jsxs)(d.DropdownMenuContent,{align:"end",className:"max-h-96 w-56 overflow-y-auto",children:[(0,t.jsx)(d.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(o.Link,{href:"/app/voice-collections",className:"w-full",children:m("all_collections")})}),b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.DropdownMenuSeparator,{}),(0,t.jsxs)(d.DropdownMenuItem,{disabled:!0,children:[(0,t.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),m("loading")]})]}):v.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.DropdownMenuSeparator,{}),v.slice(0,10).map(e=>(0,t.jsx)(d.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(o.Link,{href:"/app/collections/".concat(e._id),className:"w-full",children:(0,t.jsx)("span",{className:"truncate",children:e.title})})},e._id))]}):null,(0,t.jsx)(d.DropdownMenuSeparator,{}),(0,t.jsxs)(d.DropdownMenuItem,{className:"font-medium",onClick:e=>{e.preventDefault(),k(!0),T(!1)},children:[(0,t.jsx)(n.Plus,{className:"mr-2 h-4 w-4"}),m("create_collection")]})]})]})]}),(0,t.jsx)(w,{open:N,onOpenChange:k,onSuccess:()=>{D()}})]})}}]);