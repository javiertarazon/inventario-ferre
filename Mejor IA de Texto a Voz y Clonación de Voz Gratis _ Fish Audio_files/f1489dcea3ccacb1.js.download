(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,672345,e=>{"use strict";e.s(["addModelToCollection",()=>o,"createVoiceCollection",()=>s,"deleteCollectionModel",()=>i,"deleteVoiceCollection",()=>l,"followCollection",()=>d,"getCollectionModels",()=>n,"listVoiceCollection",()=>r,"unfollowCollection",()=>c,"updateVoiceCollection",()=>a]);var t=e.i(100574);let s=t.fetcher.path("/collection").method("post").create(),r=t.fetcher.path("/collection").method("get").create();t.fetcher.path("/collection/{id}").method("get").create(),t.fetcher.path("/collection/{id}").method("get").create();let a=t.fetcher.path("/collection/{id}").method("put").create(),l=t.fetcher.path("/collection/{id}").method("delete").create(),n=t.fetcher.path("/collection/{id}/models").method("get").create(),i=t.fetcher.path("/collection/{id}/models/{model_id}").method("delete").create(),o=t.fetcher.path("/collection/{id}/models/{model_id}").method("post").create(),d=t.fetcher.path("/collection/{id}/follow").method("post").create(),c=t.fetcher.path("/collection/{id}/follow").method("delete").create()},495242,361839,e=>{"use strict";e.s(["Pause",()=>t],495242),e.s(["default",()=>t],361839);let t=(0,e.i(475254).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},431343,451477,e=>{"use strict";e.s(["Play",()=>t],431343),e.s(["default",()=>t],451477);let t=(0,e.i(475254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},541071,373488,e=>{"use strict";e.s(["MoreHorizontal",()=>t],541071),e.s(["default",()=>t],373488);let t=(0,e.i(475254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},730062,e=>{"use strict";e.s(["Badge",()=>l]);var t=e.i(843476),s=e.i(225913),r=e.i(647163);let a=(0,s.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"},type:{outline:"rounded-md",square:"rounded-md",circle:"rounded-full","outline-circle":"rounded-full"},theme:{default:"",info:"bg-badge-info-ground text-badge-info-text hover:bg-info-ground",blue:"bg-badge-blue-ground text-badge-blue-text hover:bg-blue-ground",destructive:"bg-badge-destructive-ground text-badge-destructive-text hover:bg-destructive-ground",success:"bg-badge-success-ground text-badge-success-text hover:bg-success-ground"}},compoundVariants:[{theme:"blue",type:["outline","outline-circle"],class:"border-badge-blue-border border bg-badge-blue-outlineground text-badge-blue-outlinetext hover:bg-blue-outlineground"},{theme:"success",type:["outline","outline-circle"],class:"border-badge-success-border border bg-badge-success-outlineground text-badge-success-outlinetext hover:bg-success-outlineground"},{theme:"destructive",type:["outline","outline-circle"],class:"border-badge-destructive-border border bg-badge-destructive-outlineground text-badge-destructive-outlinetext hover:bg-destructive-outlineground"},{theme:"info",type:["outline","outline-circle"],class:"border-badge-info-border border bg-badge-info-outlineground text-badge-info-outlinetext hover:bg-info-outlineground"}],defaultVariants:{variant:"default",type:"circle"}});function l(e){let{className:s,variant:l,type:n,theme:i,...o}=e;return(0,t.jsx)("div",{className:(0,r.cn)(a({variant:l,type:n,theme:i}),s),...o})}},245046,e=>{"use strict";e.s(["Heart",()=>s]);var t=e.i(843476);function s(e){let{fillIcon:s,...r}=e;return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",...r,children:(0,t.jsx)("path",{d:"M6.24984 3.33325C3.71859 3.33325 1.6665 5.38534 1.6665 7.91659C1.6665 12.4999 7.08317 16.6666 9.99984 17.6358C12.9165 16.6666 18.3332 12.4999 18.3332 7.91659C18.3332 5.38534 16.2811 3.33325 13.7498 3.33325C12.1998 3.33325 10.829 4.10284 9.99984 5.28075C9.5772 4.67876 9.01574 4.18746 8.36298 3.84846C7.71021 3.50945 6.98538 3.33273 6.24984 3.33325Z",stroke:"currentColor",fill:s?"currentColor":"none",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})}},725626,e=>{"use strict";e.s(["Overflow",()=>h,"getTagColor",()=>c],725626);var t=e.i(843476),s=e.i(271645),r=e.i(730062),a=e.i(39839),l=e.i(647163),n=e.i(174080),i=e.i(129160),o=e.i(585264),d=e.i(162353);let c=e=>{let t=[{key:"green",class:"text-discovery-tag-green-text border-discovery-tag-green-border bg-discovery-tag-green-ground border"},{key:"cyan",class:"text-discovery-tag-cyan-text border-discovery-tag-cyan-border bg-discovery-tag-cyan-ground border"},{key:"amber",class:"text-discovery-tag-amber-text border-discovery-tag-amber-border bg-discovery-tag-amber-ground  border"},{key:"neutral",class:"text-discovery-tag-neutral-text border-discovery-tag-neutral-border bg-discovery-tag-neutral-ground border"}];return t[e%t.length].class},u=(0,s.forwardRef)((e,n)=>{let{className:i,keyAlias:u,tag:m,registerSize:h,...x}=e,g=(0,s.useRef)(null),p=(0,o.useTranslations)("train-new-model.suggested-tags");return(0,a.useResizeObserver)({ref:g,onResize:e=>{let{width:t}=e;return h(u,t?t+8:0)}}),(0,t.jsx)("div",{ref:g,children:(0,t.jsx)(r.Badge,{variant:"outline",theme:"success",className:(0,l.cn)("whitespace-nowrap",c(u),i),children:(0,d.getTagLabel)(m,p)})})});u.displayName="OverflowItem";let m=(0,s.forwardRef)((e,s)=>{let{className:a,count:n,list:u,...m}=e,h=(0,o.useTranslations)("discovery"),x=(0,o.useTranslations)("train-new-model.suggested-tags");return(0,t.jsxs)(i.Popover,{children:[(0,t.jsx)(i.PopoverTrigger,{children:(0,t.jsx)(r.Badge,{variant:"outline",children:(0,t.jsxs)("span",{children:[n,"+"]})})}),(0,t.jsx)(i.PopoverContent,{align:"end",className:"md:w-[25.125rem]",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semiblod text-xl",children:h("all_tags")}),(0,t.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:u.map((e,s)=>(0,t.jsx)(r.Badge,{variant:"outline",className:(0,l.cn)("whitespace-nowrap",c(s)),children:(0,d.getTagLabel)(e,x)},s))})]})})]})});m.displayName="TagsPoppover";let h=(0,s.forwardRef)((e,r)=>{let{className:i,data:o,maxDisplayCount:d,itemClassName:c,...h}=e,x=function(){let e=(0,s.useRef)(null);return t=>{e.current||(e.current=[],Promise.resolve().then(()=>{(0,n.unstable_batchedUpdates)(()=>{var t;null==(t=e.current)||t.forEach(e=>{e()}),e.current=null})})),e.current.push(t)}}(),g=(0,s.useRef)(null),p=(0,s.useRef)(void 0),[f,v]=(0,s.useState)(0),[j,b]=(0,s.useState)(new Map),[y,w]=(0,s.useState)(),[N,k]=(0,s.useState)(!1),[C,T]=(0,s.useState)(!1),S=(0,s.useMemo)(()=>o.filter(Boolean),[o]),M=(0,s.useCallback)(e=>{let{width:t}=e;p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{x(()=>{v(t||0)})},16)},[x]);(0,a.useResizeObserver)({ref:g,onResize:M});let _=(0,s.useCallback)((e,t)=>{x(()=>{b(s=>{let r=new Map(s);return null===t?r.delete(e):r.set(e,t),r})})},[x]),I=(0,s.useCallback)(()=>{if(!f||0===j.size)return void x(()=>{w(0),k(!1)});let e=j.get(0);if(e&&e>f)return void x(()=>{w(-1),k(!0)});let t=0,s=S.length,r=s-1;if(!s)return void x(()=>{w(0),k(!1)});for(let e=0;e<s;e+=1){if("number"==typeof d&&e>=d-1)return void x(()=>{w(d-1),k(!0)});let s=j.get(e);if(void 0===s)return void x(()=>{w(e-1),k(!1)});if(t+=s,0===r&&t<=f)return void x(()=>{w(r),k(!1)});if(t+30>f)return void x(()=>{w(e-1),k(!0)})}x(()=>{w(r),k(!1)})},[f,j,S,30,x,d]);(0,s.useLayoutEffect)(()=>{I()},[I]);let L=(0,s.useMemo)(()=>N&&void 0!==y?S.slice(0,Math.max(y,0)+1):S,[S,y,N]);return(0,s.useEffect)(()=>()=>{p.current&&clearTimeout(p.current)},[]),(0,s.useEffect)(()=>{f&&j.size===S.length&&requestAnimationFrame(()=>{T(!0)})},[f,j.size,S.length]),(0,t.jsx)("div",{className:(0,l.cn)("flex flex-grow items-center overflow-hidden",C?"opacity-100":"opacity-0","transition-opacity duration-150"),children:(0,t.jsx)("div",{ref:g,className:"flex w-full gap-2",style:{minWidth:0},children:-1===y?(0,t.jsx)(m,{count:S.length,list:S}):(0,t.jsxs)(t.Fragment,{children:[L.map((e,s)=>(0,t.jsx)(u,{className:c,keyAlias:s,tag:e,registerSize:_},s)),(0,t.jsx)("div",{className:(0,l.cn)("flex h-full items-end","".concat(L.length<S.length?"":"hidden")),children:(0,t.jsx)(m,{count:L.length+1,list:S})})]})})})});h.displayName="Overflow"},513959,e=>{"use strict";e.s(["HeartCrack",()=>s,"HeartCrackIcon",()=>r]);var t=e.i(843476);function s(e){let{fillIcon:s,...r}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:s?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[(0,t.jsx)("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}),(0,t.jsx)("path",{d:"m12 13-1-1 2-2-3-3 2-2",className:s?"stroke-white dark:stroke-black":"stroke-gray-1"})]})}function r(e){let{fillIcon:s,...r}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...r,children:[(0,t.jsx)("path",{d:"M12.6666 9.33333C13.6599 8.36 14.6666 7.19333 14.6666 5.66667C14.6666 4.69421 14.2803 3.76158 13.5926 3.07394C12.905 2.38631 11.9724 2 10.9999 2C9.82658 2 8.99992 2.33333 7.99992 3.33333C6.99992 2.33333 6.17325 2 4.99992 2C4.02746 2 3.09483 2.38631 2.40719 3.07394C1.71956 3.76158 1.33325 4.69421 1.33325 5.66667C1.33325 7.2 2.33325 8.36667 3.33325 9.33333L7.99992 14L12.6666 9.33333Z",stroke:"#5F5F6D",strokeWidth:"1.67",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M8.00008 8.66665L7.33341 7.99998L8.66675 6.66665L6.66675 4.66665L8.00008 3.33331",stroke:"#5F5F6D",strokeWidth:"1.67",strokeLinecap:"round",strokeLinejoin:"round",className:s?"stroke-white dark:stroke-black":""})]})}},173601,e=>{"use strict";e.s(["VoiceCard",()=>U,"useVoiceCardActions",()=>B],173601);var t=e.i(843476),s=e.i(271645),r=e.i(647163),a=e.i(576167),l=e.i(200997),n=e.i(192049),i=e.i(730062),o=e.i(4272),d=e.i(707621),c=e.i(541071),u=e.i(431343),m=e.i(662031),h=e.i(531278),x=e.i(495242),g=e.i(245046),p=e.i(999445),f=e.i(513959),v=e.i(258679),j=e.i(846696),b=e.i(585264),y=e.i(160889),w=e.i(39839),N=e.i(522016),k=e.i(681846),C=e.i(784273),T=e.i(725626),S=e.i(941855),M=e.i(602596),_=e.i(790830),I=e.i(37727),L=e.i(64585),D=e.i(611995);function z(e){let{children:a,content:l,className:n,side:i="top",align:o="center",defaultOpen:d=!0,onOpenChange:c,borderClassName:u,stepKey:m}=e,{user:h,setUser:x,hasLogin:g}=(0,L.useUser)(),[p,f]=(0,s.useState)(!1),v=(0,s.useRef)(null);return((0,s.useEffect)(()=>{let e=JSON.parse(sessionStorage.getItem("onboarding_record")||"[]");Array.isArray(e)||(e=[]),h?f(![...(null==h?void 0:h.onboarding_record)||[],...e].includes(m)&&d):g||f(!e.includes(m)&&d)},[m,h,d,g]),p)?(0,t.jsxs)("div",{className:"relative",ref:v,children:[a,(0,t.jsxs)("div",{className:(0,r.cn)("absolute z-50 min-w-[16rem] rounded-lg border bg-popover p-4 text-popover-foreground shadow-md outline-none","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",u,"top"===i&&"bottom-full mb-3","bottom"===i&&"top-full mt-3","left"===i&&"right-full mr-3","right"===i&&"left-full ml-3","start"===o&&("left"===i||"right"===i?"top-0":"left-0"),"center"===o&&("left"===i||"right"===i?"top-1/2 -translate-y-1/2":"left-1/2 -translate-x-1/2"),"end"===o&&("left"===i||"right"===i?"bottom-0":"right-0"),n),children:[(0,t.jsxs)("button",{onClick:()=>(e=>{if(f(e),!e&&m){let e=JSON.parse(sessionStorage.getItem("onboarding_record")||"[]");Array.isArray(e)||(e=[]);let t=new Set([...e,m]);if(sessionStorage.setItem("onboarding_record",JSON.stringify(Array.from(t))),h){(0,D.pushOnboardingRecord)({user_id:h._id,record:m});let e=new Set([...h.onboarding_record||[],m]);x({...h,onboarding_record:Array.from(e)})}}null==c||c(e)})(!1),className:"absolute right-2 top-2 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100",children:[(0,t.jsx)(I.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),l,(0,t.jsx)("div",{className:(0,r.cn)("absolute h-3 w-3 rotate-45",u,"top"===i&&["bottom-[-6.5px]","border-b border-r","bg-popover"],"bottom"===i&&["top-[-6.5px]","border-l border-t","bg-popover"],"left"===i&&["right-[-6.5px]","border-r border-t","bg-popover"],"right"===i&&["left-[-6.5px]","border-b border-l","bg-popover"],"start"===o&&("left"===i||"right"===i?"top-[15px]":"left-[15px]"),"center"===o&&("left"===i||"right"===i?"top-1/2 -translate-y-1/2":"left-1/2 -translate-x-1/2"),"end"===o&&("left"===i||"right"===i?"bottom-[15px]":"right-[15px]"))})]})]}):a}var P=e.i(558249);let A=function(e){let{avatar:s,user:a,userId:l,time:o,tags:d,samples:c,lng:u=[]}=e,m=d.length>0||u.length>0;return(0,t.jsxs)(n.Timeline,{className:"mt-2",children:[(0,t.jsx)(n.TimeLineUser,{className:"text-xs md:text-sm ".concat(!(null==c?void 0:c.length)&&"max-md:after:content-none"),avatar:s,name:a,userId:l}),(0,t.jsx)(n.TimeLineDate,{className:"max-md:after:content-none",time:o,hasTags:m}),!!(null==c?void 0:c.length)&&(0,t.jsx)(n.TimeLineSamples,{className:"max-md:after:content-none",list:c}),m&&(0,t.jsx)("div",{className:"hidden min-w-0 md:block md:max-w-[24.6875rem] md:flex-1",children:(0,t.jsxs)("div",{className:"flex w-full items-center",children:[(0,t.jsx)("div",{className:"shrink-0",children:(0,t.jsx)("div",{className:"flex gap-2",children:u.map((e,s)=>(0,t.jsx)(i.Badge,{variant:"outline",className:(0,r.cn)("whitespace-nowrap",(0,T.getTagColor)(s)),children:e},s))})}),(0,t.jsx)("div",{className:"w-2 shrink-0"}),(0,t.jsx)("div",{className:"min-w-0 flex-1",children:(0,t.jsx)(T.Overflow,{data:d,maxDisplayCount:3})})]})})]})};function B(e){let[t,r]=s.useState(!1),[a,l]=s.useState(!1),[n,i]=s.useState(!1),[o,d]=s.useState({like:0,mark:0,shared:0}),c=(0,b.useTranslations)("discovery");return s.useEffect(()=>{e&&(r(e.liked),i(e.marked),d({like:e.like_count,mark:e.mark_count,shared:e.shared_count}))},[e]),{like:t,unliked:a,mark:n,count_cache:o,handleLike:function(){e&&(t?v.unLikeModel:v.likeModel)({id:e._id}).then(s=>{t?d({...o,like:o.like-1}):(a&&(0,v.unDislikeModel)({id:e._id}).then(e=>{l(!1)}),d({...o,like:o.like+1})),r(!t)})},handleUnliked:function(){e&&(a?v.unDislikeModel:v.dislikeModel)({id:e._id}).then(s=>{!a&&t&&(0,v.unLikeModel)({id:e._id}).then(e=>{r(!1),d({...o,like:o.like-1})}),l(!a)})},handleMark:function(){e&&(n?v.unMarkModel:v.markModel)({id:e._id}).then(e=>{n?d({...o,mark:o.mark-1}):d({...o,mark:o.mark+1}),i(!n)})},share:function(){if(!e)return;let t="https://fish.audio/m/".concat(e._id);navigator.clipboard.writeText(t),(0,j.toast)(c("copied_title")),(0,v.shareModel)({id:e._id}).then(e=>{d({...o,shared:o.shared+1})})}}}let R=function(e){let{data:s,className:a,...l}=e,{like:n,unliked:i,mark:o,count_cache:d,handleLike:c,handleUnliked:h,handleMark:x,share:v}=B(s),{isCN:j}=(0,S.useEnvironment)();return(0,t.jsxs)("div",{className:(0,r.cn)("flex gap-3 md:gap-6",a),...l,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 whitespace-nowrap text-xs md:text-sm",children:[(0,t.jsx)(u.Play,{className:"h-4 w-4 shrink-0 text-gray-1 md:h-5 md:w-5"}),(0,t.jsxs)("span",{children:[(0,r.formatThousandthNumber)(s.task_count)," Used"]})]}),!j&&(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2 whitespace-nowrap text-xs md:text-sm",onClick:v,children:[(0,t.jsx)(m.Share2,{className:"h-4 w-4 shrink-0 text-gray-1 md:h-5 md:w-5"}),(0,t.jsxs)("span",{children:[d.shared," Shares"]})]}),(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:c,children:[(0,t.jsx)(g.Heart,{className:(0,r.cn)("h-4 w-4 shrink-0 md:h-5 md:w-5",n?"text-red":"text-gray-1"),fillIcon:n}),(0,t.jsx)("span",{className:"text-xs md:text-sm",children:d.like})]}),(0,t.jsx)("div",{className:"flex cursor-pointer items-center gap-2",onClick:h,children:(0,t.jsx)(f.HeartCrack,{className:(0,r.cn)("h-4 w-4 shrink-0 md:h-5 md:w-5",i?"":"text-gray-1"),fillIcon:i})}),(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:x,children:[(0,t.jsx)(p.Bookmark,{className:(0,r.cn)("h-4 w-4 shrink-0 md:h-5 md:w-5",o?"":"text-gray-1"),fillIcon:o}),(0,t.jsx)("span",{className:"text-xs md:text-sm",children:d.mark})]})]})},E=function(e){let{data:a,className:l,inner:n,handleUseVoice:i,isFirst:u,preventNavigation:m,...h}=e,x=(0,b.useTranslations)("discovery"),g=(0,y.useRouter)(),[p,f]=s.useState(!1),v=(0,w.useMediaQuery)("(max-width: 768px)"),{user:j}=(0,L.useUser)(),N=(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("h4",{className:"font-medium",children:["âœ¨ ",x("try_voice")]})})});return(0,t.jsxs)("div",{className:(0,r.cn)("mt-4 flex flex-col-reverse justify-between md:flex-row md:items-end","md:mt-".concat(n?2:4),l),...h,children:[(0,t.jsxs)("div",{className:"mt-5 flex gap-3 md:mt-0",children:[u?(0,t.jsx)(z,{content:N,defaultOpen:!0,side:"bottom",align:v?"start":"center",className:"min-w-[13rem]",borderClassName:"border-purple-500",stepKey:"discover-use-voice",children:(0,t.jsx)(o.Button,{className:"rounded-xl",size:n?"sm":"default",onClick:()=>{(0,P.track)("discover-use-voice-click",{model_id:a._id},j),null==i||i(a),m||g.push((0,r.getInstantSpeechUrl)(a._id))},children:x("use_voice")})}):(0,t.jsx)(o.Button,{className:"rounded-xl",size:n?"sm":"default",onClick:()=>{null==i||i(a),m||g.push((0,r.getInstantSpeechUrl)(a._id))},children:x("use_voice")}),(0,t.jsxs)(k.DropdownMenu,{modal:!1,children:[(0,t.jsx)(k.DropdownMenuTrigger,{children:(0,t.jsx)(c.MoreHorizontal,{className:"invisible w-fit cursor-pointer group-hover:visible"})}),(0,t.jsx)(k.DropdownMenuPortal,{children:(0,t.jsx)(k.DropdownMenuContent,{align:"start",children:(0,t.jsxs)(k.DropdownMenuItem,{className:"cursor-pointer",onClick:()=>f(!0),children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-gray-4 dark:bg-white/10",children:(0,t.jsx)(d.CircleAlert,{className:"w-4 text-gray-1"})}),(0,t.jsx)("span",{className:"ml-4",children:x("report.title")})]})})})]})]}),(0,t.jsx)(R,{data:a}),(0,t.jsx)(C.ReportModel,{link:"https://fish.audio/m/".concat(a._id),open:p,onOpenChange:f})]})},O=function(e){var s,a,l;let{data:n,className:o,handleUseVoice:d,isFirst:c,preventNavigation:u,isDashboard:m,...h}=e;return(0,t.jsxs)("div",{className:(0,r.cn)("flex flex-col items-start justify-between md:hidden",o),...h,children:[!!(null==n||null==(s=n.languages)?void 0:s.length)&&(0,t.jsx)("div",{className:"mt-4 flex gap-2",children:null==n||null==(l=n.languages)||null==(a=l.map)?void 0:a.call(l,(e,s)=>(0,t.jsx)(i.Badge,{type:"outline",className:(0,r.cn)("whitespace-nowrap",(0,T.getTagColor)(s)),children:e},s))}),n.tags.length>0&&(0,t.jsx)("div",{className:"mt-4 w-full min-w-0",children:(0,t.jsx)(T.Overflow,{data:n.tags,maxDisplayCount:5})}),(0,t.jsx)(E,{data:n,handleUseVoice:d,isFirst:c,preventNavigation:u})]})},F=s.forwardRef((e,a)=>{let{className:l,sample:n,index:i,isFirst:o,...d}=e,{isCN:c}=(0,S.useEnvironment)(),m=(0,_.useAudioRef)(),[g,p]=s.useState(!0),{currentPlaying:f,isPlay:v,handlePlayAudio:j}=(0,M.useAudioUniqueControl)(),y=(0,r.formatAudioUrl)(n.audio,c),w=(0,b.useTranslations)("discovery"),N=(0,t.jsxs)("div",{className:(0,r.cn)("flex cursor-pointer items-center gap-2",l),onClick:()=>{if(m.current)try{m.current.paused?j(m.current,!1):j(m.current,!0)}catch(e){console.error(e)}},...d,children:[(0,t.jsx)("audio",{className:"hidden",src:y,controls:!1,onEnded:()=>j(m.current,!0),onError:()=>p(!1),onCanPlayThrough:()=>p(!1),ref:m}),g?(0,t.jsx)(h.Loader2,{className:"h-4 w-4 animate-spin"}):f===m.current&&v?(0,t.jsx)(x.Pause,{className:"h-4 w-4"}):(0,t.jsx)(u.Play,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"max-w-[min(50vw,320px)] overflow-hidden truncate text-ellipsis whitespace-nowrap text-sm",title:n.text,children:n.text})]}),k=(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("h4",{className:"font-medium",children:["ðŸ”Š ",w("preview_sample")]})})});return o&&0===i?(0,t.jsx)(z,{content:k,defaultOpen:!0,side:"top",align:"start",className:"min-w-[18rem]",borderClassName:"border-purple-500",stepKey:"discover-play-sample",children:N}):N});F.displayName="AudioSample";let U=s.forwardRef((e,s)=>{let{className:n,data:i,inner:o,handleUseVoice:d,isFirst:c,preventNavigation:u,isDashboard:m,...h}=e,x=o?"md:h-[6.55rem] md:w-[6.55rem]":"md:h-[7.25rem] md:w-[7.25rem]",g=(0,w.useMediaQuery)("(min-width: 768px)");return(0,t.jsx)(a.Card,{className:(0,r.cn)("group mb-3 rounded-xl",n),...h,children:(0,t.jsxs)(a.CardContent,{className:"flex flex-col p-4 md:p-4",children:[(0,t.jsxs)("div",{className:"flex flex-1",children:[(0,t.jsx)(l.Avatar,{className:(0,r.cn)("mr-3 h-16 w-16 rounded-lg md:mr-4","".concat(x)),children:(0,t.jsx)(l.AvatarImage,{src:(0,r.fetchImage)(i.cover_image,g?128:64),alt:i.title})}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,t.jsx)(a.CardTitle,{className:(0,r.cn)("max-md:text-base","".concat(g&&o?"mt-0":""),"".concat(o?"text-lg":"")),children:(0,t.jsx)(N.default,{href:m?"/app/m/".concat(i._id):"/m/".concat(i._id),children:i.title})}),(0,t.jsx)(A,{user:i.author.nickname,userId:i.author._id,avatar:i.author.avatar,time:i.created_at,tags:i.tags,samples:i.samples,lng:i.languages}),i.samples&&i.samples.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-col space-y-2",children:i.samples.slice(0,3).map((e,s)=>(0,t.jsx)(F,{sample:e,index:s,isFirst:c},s))}),(0,t.jsx)("div",{className:"w-full flex-1"}),(0,t.jsx)(E,{className:"hidden md:flex",data:i,inner:o,handleUseVoice:d,isFirst:c,preventNavigation:u})]})]}),(0,t.jsx)(O,{data:i,handleUseVoice:d,isFirst:c,preventNavigation:u,isDashboard:m})]})})});U.displayName="VoiceCard"},87309,913497,e=>{"use strict";e.s(["AudioLines",()=>t],87309),e.s(["default",()=>t],913497);let t=(0,e.i(475254).default)("audio-lines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]])},80897,814091,e=>{"use strict";e.s(["DiscoveryPageFilter",()=>S,"DiscoveryPageSort",()=>C,"DiscoveryPageSortContext",()=>y,"LanguageFilter",()=>k,"languageNameMap",()=>w],80897);var t=e.i(843476),s=e.i(67199),r=e.i(129402),a=e.i(643531),l=e.i(271645),n=e.i(4272),i=e.i(653860),o=e.i(730062);e.s(["default",()=>d],814091);let d=(0,e.i(475254).default)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);var c=e.i(37727),u=e.i(162353),m=e.i(129160),h=e.i(593438),x=e.i(115052),g=e.i(647163),p=e.i(664659),f=e.i(600743),v=e.i(585264);function j(e){let{options:s,value:r,onChange:i,placeholder:o="Select languages",className:d,triggerClassName:c}=e,[u,h]=(0,l.useState)(!1),x=(0,v.useTranslations)("discovery"),j=(0,l.useRef)(null),[b,y]=(0,l.useState)(0);(0,l.useEffect)(()=>{j.current&&y(j.current.offsetWidth)},[u]);let w=e=>{if("all"===e)i(r.includes("all")?[]:["all"]);else{let t=r.filter(e=>"all"!==e);t.includes(e)?i(t.filter(t=>t!==e)):i([...t,e])}};return(0,t.jsxs)(m.Popover,{open:u,onOpenChange:h,children:[(0,t.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{ref:j,variant:"outline",role:"combobox","aria-expanded":u,className:(0,g.cn)("w-full justify-between rounded-xl border bg-background font-normal",c),children:[(0,t.jsxs)("span",{className:"flex items-center gap-2 truncate",children:[1===r.length&&!r.includes("all")&&(0,t.jsx)(f.TwemojiFlag,{locale:r[0],size:16}),(()=>{if(0===r.length)return o;if(r.includes("all"))return x("filter.language.all");if(1===r.length){let e=s.find(e=>e.value===r[0]);return(null==e?void 0:e.label)||r[0]}return"".concat(r.length," ").concat(x("filter.language.selected"))})()]}),(0,t.jsx)(p.ChevronDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsx)(m.PopoverContent,{className:(0,g.cn)("rounded-xl p-1",d),style:{width:b>0?b:"auto"},align:"start",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.Button,{type:"button",variant:"ghost",className:(0,g.cn)("flex h-auto w-full cursor-pointer items-center justify-between rounded-xl px-2 py-1.5 text-sm font-normal",r.includes("all")&&"bg-accent/50"),onClick:()=>w("all"),children:[(0,t.jsx)("span",{children:x("filter.language.all")}),r.includes("all")&&(0,t.jsx)(a.Check,{className:"h-4 w-4 text-primary"})]}),s.map(e=>{let s=r.includes(e.value);return(0,t.jsxs)(n.Button,{type:"button",variant:"ghost",className:(0,g.cn)("flex h-auto w-full cursor-pointer items-center justify-between rounded-xl px-2 py-1.5 text-sm font-normal",s&&"bg-accent/50"),onClick:()=>w(e.value),children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.TwemojiFlag,{locale:e.value,size:16}),e.label]}),s&&(0,t.jsx)(a.Check,{className:"h-4 w-4 text-primary"})]},e.value)})]})})]})}var b=e.i(462837);let y=(0,l.createContext)({form:{sort_by:"score",tags:[],languages:[],search:void 0},lngOpts:[],updateForm:()=>{}}),w={zh:"æ±‰è¯­",en:"English",ja:"æ—¥æœ¬èªž",de:"Deutsch",fr:"FranÃ§ais",es:"EspaÃ±ol",ko:"í•œêµ­ì–´",ar:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",ru:"Ð ÑƒÑÑÐºÐ¸Ð¹",nl:"Nederlands",it:"Italiano",pl:"Polski",pt:"PortuguÃªs"},N=(0,l.forwardRef)((e,l)=>{let{sortBy:n,onSortChange:i}=e,o=(0,v.useTranslations)("discovery");return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-4 text-sm font-medium text-muted-foreground max-md:hidden",children:o("sort.title")}),(0,t.jsxs)(s.Select,{value:n,onValueChange:e=>i(e),children:[(0,t.jsx)(s.SelectTrigger,{className:"w-[180px] rounded-xl border bg-background",children:(0,t.jsx)(s.SelectValue,{})}),(0,t.jsxs)(s.SelectContent,{className:"rounded-xl",children:[(0,t.jsxs)(r.Item,{value:"score",className:"relative flex w-full cursor-default select-none items-center justify-between rounded-xl px-3 py-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",children:[(0,t.jsx)(r.ItemText,{children:o("sort.count")}),(0,t.jsx)(r.ItemIndicator,{children:(0,t.jsx)(a.Check,{className:"h-4 w-4"})})]}),(0,t.jsxs)(r.Item,{value:"created_at",className:"relative flex w-full cursor-default select-none items-center justify-between rounded-xl px-3 py-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",children:[(0,t.jsx)(r.ItemText,{children:o("sort.new")}),(0,t.jsx)(r.ItemIndicator,{children:(0,t.jsx)(a.Check,{className:"h-4 w-4"})})]})]})]})]})}),k=(0,l.forwardRef)((e,l)=>{let{languageValue:n,onLanguageChange:i,languageOptions:o,disabled:d,disabledCount:c}=e,u=(0,v.useTranslations)("discovery"),m=[...new Set([...o,"ru","pt"])],h=d&&c?"".concat(c," ").concat(u("filter.language.selected")):void 0,x=(0,t.jsxs)("div",{className:"hidden items-center md:flex",children:[(0,t.jsx)("span",{className:"mr-4 text-sm font-medium text-muted-foreground",children:u("filter.language.title")}),(0,t.jsxs)(s.Select,{value:d?"":n,onValueChange:i,disabled:d,children:[(0,t.jsx)(s.SelectTrigger,{className:(0,g.cn)("w-[180px] rounded-xl border bg-background",d&&"cursor-not-allowed opacity-50"),children:h?(0,t.jsx)("span",{children:h}):(0,t.jsx)(s.SelectValue,{placeholder:u("filter.language.placeholder")})}),(0,t.jsxs)(s.SelectContent,{className:"rounded-xl",children:[(0,t.jsxs)(r.Item,{value:"all",className:"relative flex w-full cursor-default select-none items-center justify-between rounded-xl px-3 py-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",children:[(0,t.jsx)(r.ItemText,{children:u("filter.language.all")}),(0,t.jsx)(r.ItemIndicator,{children:(0,t.jsx)(a.Check,{className:"h-4 w-4"})})]}),m.map(e=>(0,t.jsxs)(r.Item,{value:e,className:"relative flex w-full cursor-default select-none items-center justify-between rounded-xl px-3 py-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",children:[(0,t.jsx)(r.ItemText,{children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.TwemojiFlag,{locale:e,size:16}),w[e]||e]})}),(0,t.jsx)(r.ItemIndicator,{children:(0,t.jsx)(a.Check,{className:"h-4 w-4"})})]},e))]})]})]});return d?(0,t.jsx)(b.TooltipProvider,{children:(0,t.jsxs)(b.Tooltip,{children:[(0,t.jsx)(b.TooltipTrigger,{asChild:!0,children:x}),(0,t.jsx)(b.TooltipContent,{children:(0,t.jsx)("p",{children:u("filter.language.disabled_hint")})})]})}):x});function C(){(0,v.useTranslations)("discovery");let{updateForm:e,form:s,lngOpts:r}=(0,l.useContext)(y),a=s.languages.length>1,n=0===s.languages.length||s.languages.includes("all")?"all":s.languages[0];return(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(N,{sortBy:s.sort_by,onSortChange:t=>e({...s,sort_by:t})}),(0,t.jsx)(k,{languageValue:a?"all":n,onLanguageChange:t=>e({...s,languages:"all"===t?[]:[t]}),languageOptions:r,disabled:a,disabledCount:a?s.languages.length:void 0})]})}let T=(0,l.forwardRef)((e,s)=>{let{title:r,children:a,className:l,...n}=e;return(0,t.jsxs)("div",{ref:s,className:"mb-6",...n,children:[(0,t.jsx)("h4",{className:"mb-1.5 text-sm font-medium",children:r}),a]})});function S(e){let{context:s=y}=e,r=(0,v.useTranslations)("discovery"),a=(0,v.useTranslations)("train-new-model.suggested-tags"),p=(0,v.useTranslations)("train-new-model.tag-categories"),f=(0,x.useIsMobile)(),[b,N]=(0,l.useState)(!1),[k,C]=(0,l.useState)(""),[S,M]=(0,l.useState)(new Set),_=(0,t.jsx)(n.Button,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-xl",children:(0,t.jsx)(d,{className:"h-4 w-4"})}),{updateForm:I,form:L,lngOpts:D}=(0,l.useContext)(s),z=(0,v.useLocale)(),[P,A]=(0,l.useState)({tags:L.tags,languages:L.languages});function B(e){P.tags.includes(e)?A({...P,tags:P.tags.filter(t=>t!==e)}):A({...P,tags:[...P.tags,e]})}(0,l.useEffect)(()=>{A({tags:L.tags,languages:L.languages})},[L]);let R=k.trim().toLowerCase(),E=R.length>0,O=Object.entries(u.TAG_CATEGORIES).map(e=>{let[t,s]=e,r=[...s.tags];return E&&(r=r.filter(e=>a(e).toLowerCase().includes(R)||e.includes(R))),{categoryKey:t,category:s,availableTags:r}}),F=(0,t.jsx)(n.Button,{variant:"link",size:"sm",className:"h-auto p-0 text-muted-foreground hover:text-foreground",onClick:function(){A({tags:[],languages:["zh-CN"===z?"zh":z]}),C(""),M(new Set)},children:r("reset")}),U=(0,t.jsxs)("div",{className:"relative flex max-h-[70vh] flex-col p-4 md:max-h-[50vh] md:p-1",children:[f?(0,t.jsxs)(h.DrawerHeader,{className:"-mt-6 mb-4 flex items-center justify-between p-0",children:[(0,t.jsx)(h.DrawerTitle,{children:r("filter.title")}),(0,t.jsxs)("div",{className:"flex gap-4",children:[F,(0,t.jsx)(h.DrawerClose,{className:"text-muted-foreground",children:(0,t.jsx)(c.X,{className:"h-5 w-5"})})]})]}):(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:r("filter.title")}),F]}),(0,t.jsxs)("div",{"data-vaul-no-drag":!0,className:"min-h-0 flex-1 touch-pan-y overflow-y-auto",children:[(0,t.jsxs)(T,{title:r("filter.language.title_plural"),children:[(0,t.jsx)("p",{className:"mb-2 text-xs text-muted-foreground",children:r("filter.language.match_all_hint")}),(0,t.jsx)(j,{options:[...new Set([...D,"ru","pt"])].map(e=>({value:e,label:w[e]||e})),value:P.languages,onChange:e=>A({...P,languages:e}),placeholder:r("filter.language.placeholder"),triggerClassName:"w-full"})]}),(0,t.jsxs)(T,{title:r("filter.tags.title"),children:[(0,t.jsxs)("div",{className:"relative mb-3",children:[(0,t.jsx)(i.Input,{type:"text",value:k,onChange:e=>C(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&k.trim()){e.preventDefault();let t=k.trim();P.tags.includes(t)||A({...P,tags:[...P.tags,t]}),C("")}},placeholder:r("filter.tags.placeholder"),className:"rounded-xl"}),k.trim()&&(0,t.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-muted-foreground",children:"Press Enter to add"})]}),P.tags.filter(e=>!u.SUGGESTED_TAG_KEYS.includes(e)).length>0&&(0,t.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:P.tags.filter(e=>!u.SUGGESTED_TAG_KEYS.includes(e)).map(e=>(0,t.jsxs)(o.Badge,{variant:"outline",className:"cursor-pointer border-primary bg-primary/10 font-normal text-primary hover:bg-primary/20",onClick:()=>B(e),children:[e,(0,t.jsx)(c.X,{className:"ml-1 h-3 w-3"})]},e))}),(0,t.jsx)("div",{className:"space-y-3",children:O.map(e=>{let{categoryKey:s,category:r,availableTags:l}=e;if(0===l.length)return null;let i=S.has(s),d=E||i?l:l.slice(0,6),c=l.length-6;return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-1.5 text-xs font-medium text-muted-foreground",children:p(r.labelKey)}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[d.map(e=>{let s=P.tags.includes(e);return(0,t.jsx)(o.Badge,{variant:"outline",className:(0,g.cn)("cursor-pointer whitespace-nowrap font-normal transition-colors",s?"border-primary bg-primary/10 text-primary hover:bg-primary/20":"hover:border-primary hover:text-primary"),onClick:()=>{B(e),C("")},children:a(e)},e)}),c>0&&!E&&(0,t.jsx)(n.Button,{type:"button",variant:"ghost",onClick:()=>{M(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},className:"h-auto px-2 py-1 text-xs text-primary underline-offset-2 hover:bg-transparent hover:underline",children:i?p("showLess"):p("showMoreCount",{count:c})})]})]},s)})})]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(n.Button,{className:"w-full rounded-xl",onClick:function(){I({...L,...P}),N(!1)},children:r("filter.apply")})})]});return f?(0,t.jsxs)(h.Drawer,{open:b,onOpenChange:N,modal:!1,children:[(0,t.jsx)(h.DrawerTrigger,{asChild:!0,children:_}),(0,t.jsx)(h.DrawerContent,{children:U})]}):(0,t.jsxs)(m.Popover,{open:b,onOpenChange:N,children:[(0,t.jsx)(m.PopoverTrigger,{asChild:!0,children:_}),(0,t.jsx)(m.PopoverContent,{className:"w-80 rounded-xl",align:"end",children:U})]})}T.displayName="DiscoveryPageFormItem",N.displayName="SortFilter",k.displayName="LanguageFilter"}]);